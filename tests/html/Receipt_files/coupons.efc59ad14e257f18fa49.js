"use strict";(self.webpackChunkseamless_spa=self.webpackChunkseamless_spa||[]).push([[7032],{165355:(e,o,t)=>{t.d(o,{A:()=>C});var a=t(58168),n=t(198587),s=t(296540),r=t(369509),i=t(883503),l=t.n(i),c=t(405173),u=["brands","categories","excludeOffers","offers","specialSavings","unclippedLabel"];function p(e){return e.replace(/\s*,\s*/gi,",")}var d=["gridId","hideShipMessage","shouldShowSimpleHeader","simpleHeader","shouldShowLinkHeader","linkHeaderObj","backgroundColor","filters"];const C=e=>{var{gridId:o,hideShipMessage:t=!0,shouldShowSimpleHeader:i,simpleHeader:C,shouldShowLinkHeader:m,linkHeaderObj:A,backgroundColor:S,filters:E}=e,O=(0,n.A)(e,d),v=function(e){var o=(0,a.A)({},e);for(var[t,n]of Object.entries(o))u.includes(t)&&(Array.isArray(n)?o[t]=n.map((e=>p(e))):"string"==typeof n&&(o[t]=p(n)));return o}(null!=E?E:{}),N=(0,a.A)({},O,{hideShipMessage:t,ampPowered:!0,componentLoggingName:o,filters:v,gridId:o+c.Ay.GRID_ID_DELIMITER+l()(JSON.stringify({gridId:e.gridId,filters:e.filters,hideShipMessage:e.hideShipMessage,inverse:e.inverse,mode:e.mode})),origin:{page:"amp",component:o},className:"mobile-card",shouldShowSimpleHeader:i,simpleHeader:C,shouldShowLinkHeader:m,linkHeaderObj:A,backgroundColor:S});return s.createElement(r.A,N)}},616126:(e,o,t)=>{t.d(o,{A:()=>M});var a=t(58168),n=t(832875),s=t(303211),r=t(757818),i=t(236157),l=t(255263),c=t(416683),u=t(95531),p=t(550679),d=t(589636),C=t(183043),m=t(616962),A=t(423583),S=t(12),E=t(789531),O=t(296540),v=t(511087),N=t(783205),g=t(881931);const y={handleKeyPressEnter:e=>o=>{"Enter"!==o.key&&" "!==o.key||e()}},_=t.p+"images/Paypalonly-52aO3nw.svg";var h=e=>{var{coupon:o}=e;return"NON_RETAILER_ONLY"===o.cashbackCashoutType?O.createElement(N.A,{src:_,className:"w-100 px-8 self-end ml-auto",alt:"PayPal only"}):null};const T=O.memo(h);var P=t(333031),L=t.n(P),I=t(17693),f=e=>{var{coupon:o}=e,{specialSavings:t}=o,a=t;return t&&(a=L()(t.filter((e=>"string"==typeof e.displayName&&!["Coupons Expiring","General Savings"].includes(e.displayName))),"displayOrder")),a&&a.length>0?O.createElement("span",{className:"bg-neutral-more-subtle w-100 flex flex-row ml-auto rounded-small mr-8 justify-center items-center"},O.createElement(I.A,{className:"font-bold text-special-more-prominent p-4",size:"xs",bold:!0,tag:"span","data-testid":"CouponSpecialSaving-"+o.id,style:{lineHeight:1}},a[0].displayName||"")):null};f.displayName="CouponFilterTag";var D=t(478643),b=e=>{var{coupon:o}=e,{monetized:t}=o;return t&&t.promotedUpc?O.createElement(D.A,{className:"ml-8 flex-row"}):null},R=e=>{var{coupon:o}=e;return O.createElement("div",{className:"flex flex-wrap flex-row h-16 rounded-t-medium mt-8 w-full align-center"},O.createElement(b,{coupon:o}),O.createElement(f,{coupon:o}),O.createElement(T,{coupon:o}))},U=e=>{var{id:o,description:t,openModalHandler:a,handleKeyPressEnter:n}=e;return O.createElement(I.A,{size:"l",className:"CouponCard-Description mb-0 hover:underline mt-0 truncate font-secondary font-bold block",onClick:a,tabIndex:0,"data-testid":"CouponDesc-"+o,onKeyDown:n(a),role:"link"},t)},k=e=>{var o,{coupon:t,couponContext:a,openModal:n,dispatchOmnitureEventForViewCoupon:r,dispatchOmnitureViewCouponActionWithSearch:i,couponActionHandler:l,ppr:c=2,couponIndex:u=0,omnitureHandler:p,couponStatus:d,enableShip:_,titlesForHidingExpiryTag:h=[],searchString:T,shouldOpenDetailsModalInContainer:P,openDetailsView:L,dispatchShopAllItemsAnalytics:I}=e,{forCampaign:f}=t,D=()=>{P&&L?(L({couponId:t.id,couponIndex:u,ppr:c}),I("shop all items","available coupons",u+1)):n({couponId:t.id,couponIndex:u,ppr:c}),a===C.wn.ALL_COUPONS&&T&&""!==T?i({coupon:t,couponIndex:u,ppr:c,searchString:T}):r({coupon:t,couponIndex:u,ppr:c})};return O.createElement("div",{className:"CouponCard-wrapper"},O.createElement("div",{className:(o="CouponCardNew border rounded-large max-w-full w-full h-full flex flex-wrap justify-start items-start hover:shadow-2",d===m.d?o+" border-dashed border-neutral-most-prominent":o+" border-neutral-more-subtle"),"data-testid":"CouponCard-"+t.id,"data-brand":t.brandName,"data-category":(()=>{var e="",{categories:o}=t;return o&&o.forEach((o=>{e=""+e+o+","})),e})(),lang:"en"},O.createElement(R,{coupon:t}),O.createElement("div",{className:"CouponCard-content stack-high w-full px-16 pb-16 mt-12"},O.createElement("div",{className:"flex flex-row just"},O.createElement("button",{onKeyDown:y.handleKeyPressEnter(D),type:"button",onClick:D,"aria-label":"Image "+t.shortDescription+", Click on this image to view more info in coupon modal",className:"pl-0 pr-0 w-104 h-104 bg-primary","data-testid":"CouponCard-image-"+t.id},O.createElement(N.A,{src:t.imageUrl,className:"justify-around CouponCard-image",alt:t.shortDescription,role:"presentation","data-testid":"CouponCard-image",loading:"eager"})),O.createElement("div",{className:"CouponCard-Info flex flex-col pl-16 pr-8 overflow-hidden"},O.createElement("div",{className:"CouponCard-Infos mb-4"},O.createElement(g.A,{className:"truncate CouponCard-heading","data-testid":"CouponTitle-"+t.id,title:t.title,tabIndex:0}),O.createElement(U,{id:t.id,description:t.shortDescription,openModalHandler:D,handleKeyPressEnter:y.handleKeyPressEnter})),O.createElement(S.A,{coupon:t,titlesForHidingExpiryTag:h}))),O.createElement(A.A,{coupon:t,couponStatus:d,classNames:"mt-8 mb-8 max-w-full"}),O.createElement("div",{className:"CouponCard-ButtonSection flex flex-row h-32 justify-left"},f?null:(()=>{if(d===m.q2)return null;var e=d===m.d||d===m.K9?"primary":"secondary",o=d===m.d||d===m.K9?"fill":"border",a="CASH_BACK"===t.type?"cashback":"coupon";return O.createElement(v.Ay,{onClick:D,kind:"prominent",palette:"accent",variant:o,"aria-label":"Shop All Items for coupon: "+t.shortDescription+" "+a,className:"flex flex-row CouponCard-viewQualifyingProducts body-m","data-testid":"ShopAllItems-"+e+"-"+t.id},"Shop All Items")})(),O.createElement(E.A,{coupon:t,couponIndex:u,omnitureHandler:p,couponActionHandler:l,couponStatus:d,ppr:c,additionalActions:_?s.aQ:void 0,className:"ml-8 "+(f&&"w-full")+" w-1/2"})))))};var w=t(315646),x=(0,c.connect)(((e,o)=>{var{couponsFilters:t}=e;return{isAuthenticated:(0,i.Kc)(e),loyalMember:(0,i.Hp)(e),url:"/savings/c/"+o.coupon.krogerCouponNumber,hasMaxCouponLimitReached:(0,w.S3)(e),titlesForHidingExpiryTag:(0,n.t6)(e),enableWaysToShop:!0===(0,n.XJ)(e),searchString:t.searchString,enableCouponExpiryValidation:(0,n.EI)(e),isCloseToStore:u.modalityPreferences.selectors.getIsCloseToStore(e)}}),((e,o)=>({openModal:t=>e((0,s.qf)((0,a.A)({couponContext:o.couponContext},t))),goToCouponDetailsPage:r.FG,dispatchShopAllItemsAnalytics:(o,t,a)=>{e({type:"SEAMLESS_NAVIGATE_NO_NAVIGATION",payload:{componentName:t,usageContext:o,dataClassification:"Highly Private Linked Personal Information",itemIndex:a}})}})));const M=(0,l.compose)((0,l.setDisplayName)("CouponCardContainer"),x,p.c)((0,d.A)(k))},369509:(e,o,t)=>{t.d(o,{A:()=>I});var a=t(255263),n=t(236157),s=t(382601),r=t(757818),i=t(897171),l=t(416683),c=t(800064),u=t(168618),p=t(58168),d=t(302404),C=t.n(d),m=t(32485),A=t.n(m),S=t(296540),E=t(801081),O=t(564404),v=t(461121),N=t(610987),g=t(789328),y="COUPONS",_=(0,E.createSelector)((e=>{var o;return(null===(o=e.metrics)||void 0===o?void 0:o.componentName)||e.componentLoggingName||e.gridId||y}),(e=>{var o;return(null===(o=e.metrics)||void 0===o?void 0:o.componentType)||""}),(e=>{var o;return(null===(o=e.metrics)||void 0===o?void 0:o.payloadIdentification)||""}),(e=>e.productSearchID),(e=>e.ampPowered),(e=>{var o;return null===(o=e.metrics)||void 0===o?void 0:o.positionOrder}),((e,o,t,a,n,s)=>({componentName:e,componentType:o,payloadIdentification:t,positionOrder:s,productSearchID:a,ampPowered:Boolean(n)})));class h extends S.Component{constructor(){super(...arguments),this.timeoutId=null,this.lastActiveLAFObject=null,this.debounceTime=0}fetchCoupons(e){this.clearFetchTimeout(),this.timeoutId=setTimeout((()=>{var{preferredStoreLoaded:o,preferredStoreLoading:t,query:a,filters:n,gridId:s=y,hideClippedCoupons:r,isAuthenticationCompleted:i,activeLAFObject:l,type:c,origin:u,isCartCoupons:d=!1}=e;if(i&&o&&!t&&l){this.lastActiveLAFObject=l;var C={maxItems:e.maxItems,status:r?"UNCLIPPED":"NONE",type:c};void 0!==n&&(C=(0,p.A)({},C,{excludeOffers:n.excludeOffers,newCouponsSelected:n.newCoupons,offers:n.offers,selectedBrands:n.brands,selectedCategories:n.categories,selectedSpecialSavings:n.specialSavings,selectedUpcs:n.upcs,selectedModalities:n.modalities})),a&&(C.searchString=a),e.ampPowered?e.resetAmpGrid(s):null!=s&&s.includes("savings center")||e.resetCoupons(),e.getAllCoupons(C,s,u,d)}}),this.debounceTime)}clearFetchTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}componentDidMount(){this.debounceTime=250,this.fetchCoupons(this.props)}componentDidUpdate(e){this.isFiltersOrModalityChanged(e)&&this.fetchCoupons(this.props)}componentWillUnmount(){this.clearFetchTimeout();var{ampPowered:e,gridId:o=y}=this.props;e?this.props.resetAmpGrid(o):this.props.resetCoupons()}isFiltersOrModalityChanged(e){var{filters:o,activeLAFObject:t}=this.props;return!C()(this.lastActiveLAFObject,t)||!C()(e.filters,o)}shouldComponentUpdate(e){return this.isFiltersOrModalityChanged(e)||e.coupons!==this.props.coupons||e.spinner!==this.props.spinner||e.couponsFetchError!==this.props.couponsFetchError||e.activeModalityType!==this.props.activeModalityType||e.preferredStoreErrored!==this.props.preferredStoreErrored||e.rows!==this.props.rows||e.gridId!==this.props.gridId||e.providedCouponCardWidth!==this.props.providedCouponCardWidth||e.activeLAFObject!==this.props.activeLAFObject}render(){var{hideIfNoResults:e=!1,mode:o="carousel",coupons:t,rows:a,gridId:n=y,couponsFetchError:s,couponCount:r,enableShip:i,preferredStoreErrored:l,maxClipsAllowed:c=0,hideClippedCoupons:u=!1,hideShipMessage:p,inverseSpinner:d,className:C,postRemoveAction:m,inverse:E,type:h,shouldOpenDetailsModalInContainer:T=!1,couponsHeadingText:P,backButtonClassNames:L,couponsHeadingTextClassNames:I,isDrawer:f,callbackForModalText:D,showCouponsForAnyModality:b=!0,activeModalityType:R,palette:U,productCardType:k,providedCouponCardWidth:w,shouldShowSimpleHeader:x,simpleHeader:M,shouldShowLinkHeader:H,linkHeaderObj:B,backgroundColor:F,onNoResults:G}=this.props,K=!(!d&&!E),V={mode:o,coupons:t,maxClipsAllowed:c,omniture:_(this.props),rows:a,couponContext:n,unwrapSingleCard:!0,hideClippedCoupons:u,className:A()(C,"rounded-large"),postRemoveAction:m,inverse:E,type:h,shouldOpenDetailsModalInContainer:T,couponsHeadingText:P,backButtonClassNames:L,couponsHeadingTextClassNames:I,isDrawer:f,callbackForModalText:D,showCouponsForAnyModality:b,activeModalityType:R,palette:U,productCardType:k,providedCouponCardWidth:w,shouldShowSimpleHeader:x,simpleHeader:M,shouldShowLinkHeader:H,linkHeaderObj:B,backgroundColor:F,onNoResults:G},Y=e&&0===r,j=S.createElement(S.Fragment,null,!(s||0===r||p)&&i&&S.createElement("div",null,S.createElement(N.A,{componentName:n})),S.createElement(g.A,V));return Y?null:S.createElement("div",{className:"Coupons_wrapper w-full"},l?S.createElement(O.A,{inverse:K,type:Array.isArray(h)?h.join("_"):h,onNoResults:G}):(()=>this.props.spinner?S.createElement(v.A,{className:"Coupon_spinner",label:d?"":"loading",inverse:K,palette:U}):j)())}}var{async:T}=c.useCases.modalityPreferences.selectors,P={getAllCoupons:r.DB,resetCoupons:i.h3,resetAmpGrid:i.u1},L=(0,l.connect)(((e,o)=>{var t=(0,s.Mt)(o.gridId);return{coupons:e.coupons.couponList,spinner:o.gridId?t.isCouponLoading(e)||(T(e)||{}).loading:e.coupons.status.loading,isAuthenticated:(0,n.Kc)(e),isAuthenticationCompleted:(0,n.Vs)(e),couponsFetchError:o.gridId?t.getCouponFetchError(e):e.coupons.couponsFetchError,couponCount:e.couponCounts.totalCount}}),P);const I=(0,a.compose)(L,u.a)(h)},789328:(e,o,t)=>{t.d(o,{A:()=>$});var a=t(58168),n=t(457975),s=t.n(n),r=t(747761),i=t.n(r),l=t(820826),c=t.n(l),u=t(296540),p=t(416683),d=t(801081),C=t(556475),m=t(183043),A=t(382601),S=t(726415),E=t(832875),O=t(706037),v=t(942676),N=t(746266),g=t(432521),y=t(646102),_=t(115857),h=t(511087),T=t(81881),P=t(17693),L=t(227817),I=t(748082),f=t(16490),D=t(236157),b=t(652006),R=t(723157),U=t(962193),k=t.n(U),w=t(798798),x=t(564404),M=t(616126),H=e=>{var o,{item:t}=e;return u.createElement(M.A,{key:e.index,couponContext:null==t?void 0:t.couponContext,couponIndex:e.index,coupon:t,ppr:e.columnCount,dispatchOmnitureEventForViewCoupon:t.dispatchOmnitureEventForViewCoupon,dispatchOmnitureViewCouponActionWithSearch:t.dispatchOmnitureViewCouponActionWithSearch,omniture:null==t?void 0:t.omniture,postRemoveAction:t.postRemoveAction,disabled:null!==(o=null==t?void 0:t.shouldDisableCouponCard)&&void 0!==o&&o,shouldOpenDetailsModalInContainer:null==t?void 0:t.shouldOpenDetailsModalInContainer,openDetailsView:null==t?void 0:t.openDetailsView})},B=(e,o)=>{var t=e.item,a=o.item;return!!((e,o)=>e.addedToCard===o.addedToCard&&e.canBeAddedToCard===o.canBeAddedToCard&&e.canBeRemoved===o.canBeRemoved&&e.isSharable===o.isSharable&&e.shouldDisableCouponCard===o.shouldDisableCouponCard)(t,a)&&(!!((e,o)=>e.status===o.status&&e.error===o.error&&e.couponLoading===o.couponLoading&&e.couponRemoving===o.couponRemoving&&e.showCouponsSuccessMessage===o.showCouponsSuccessMessage)(t,a)&&((e,o)=>e.popularitySortRank===o.popularitySortRank&&e.shouldOpenDetailsModalInContainer===o.shouldOpenDetailsModalInContainer&&e.clickListCoupon===o.clickListCoupon)(t,a))},F=(0,u.memo)(H,B),G=e=>{var o;return"coupon-card-"+(null!==(o=e.krogerCouponNumber)&&void 0!==o?o:e.id)},K=e=>{var{couponsFetchError:o,coupons:t,inverse:n,type:s,couponContext:r}=e,i=s||r===m.wn.LOADED_CASHBACK&&"CASH_BACK",l=!!n;return o||k()(t)?u.createElement(x.A,{inverse:l,type:""+i}):u.createElement("div",{className:"p-4 CouponsDisplayWrapper CouponsDisplayWrapper-WideCard"},(e=>{var{mode:o,rows:t,unwrapSingleCard:n=!1,shouldDisableCouponCard:s,couponsNumber:r=[],coupons:i,couponContext:l,omniture:c,dispatchOmnitureEventForViewCoupon:p,dispatchOmnitureViewCouponActionWithSearch:d,postRemoveAction:C,className:m,shouldOpenDetailsModalInContainer:A,openDetailsView:S,palette:E,inverse:O,providedCouponCardWidth:v=360}=e,N=v,g=(0,u.useMemo)((()=>r.filter((e=>{var{hidden:o}=e;return!o})).map((e=>{var{couponNumber:o}=e;return(0,a.A)({},i[o],{couponContext:l,dispatchOmnitureEventForViewCoupon:p,dispatchOmnitureViewCouponActionWithSearch:d,omniture:c,postRemoveAction:C,shouldDisableCouponCard:s,shouldOpenDetailsModalInContainer:A,openDetailsView:S})}))),[r,i,l,p,d,c,C,s,A,S]),y=(0,u.useCallback)((e=>u.createElement(F,e)),[]);return g.length>0?u.createElement(w.A,{data:g,cardWidth:N,cardGap:16,renderCardContent:y,keyExtractor:G,mode:o,rows:t,unwrapSingleCard:n,keyFrom:"id",className:m,palette:E,inverse:O}):null})(e))};K.defaultProps={unwrapSingleCard:!1,maxClipsAllowed:0};const V=K;var Y="/",j=u.lazy((()=>i()({id:"../components/ShoppersCard/ShoppersCard",load:()=>Promise.all([t.e(9201).then(t.bind(t,292315))]).then((e=>e[0])),path:()=>s().join(Y,"../components/ShoppersCard/ShoppersCard"),resolve:()=>292315,chunkName:()=>"components/ShoppersCard/ShoppersCard"}))),W=u.lazy((()=>i()({id:"../components/SavingsCenterAvailableCashback/SavingsCenterAvailableCashback",load:()=>Promise.all([t.e(5843).then(t.bind(t,740192))]).then((e=>e[0])),path:()=>s().join(Y,"../components/SavingsCenterAvailableCashback/SavingsCenterAvailableCashback"),resolve:()=>740192,chunkName:()=>"components/SavingsCenterAvailableCashback/SavingsCenterAvailableCashback"}))),Q=u.lazy((()=>i()({id:"../components/SavingsCenterCarousel/SavingsCenterCarouselHeader",load:()=>Promise.all([t.e(5856).then(t.bind(t,830524))]).then((e=>e[0])),path:()=>s().join(Y,"../components/SavingsCenterCarousel/SavingsCenterCarouselHeader"),resolve:()=>830524,chunkName:()=>"components/SavingsCenterCarousel/SavingsCenterCarouselHeader"}))),z=u.lazy((()=>i()({id:"./CouponModalContainer",load:()=>Promise.all([t.e(2441).then(t.bind(t,243496))]).then((e=>e[0])),path:()=>s().join(Y,"./CouponModalContainer"),resolve:()=>243496,chunkName:()=>"CouponModalContainer"}))),q=u.lazy((()=>i()({id:"./ShipModalContainer",load:()=>Promise.all([t.e(7181).then(t.bind(t,124645))]).then((e=>e[0])),path:()=>s().join(Y,"./ShipModalContainer"),resolve:()=>124645,chunkName:()=>"ShipModalContainer"}))),X=(0,d.createSelector)((e=>e.omniture),(e=>e.dispatchOmnitureViewCouponAction),((e,o)=>o.bind(void 0,e))),J=(0,d.createSelector)((e=>e.dispatchOmnitureViewCouponAction),(e=>e.bind(void 0,{componentName:C.w$.COUPON_SEARCH_FILTER,tabName:m.wn.ALL_COUPONS}))),Z={dispatchOmnitureViewCouponAction:O.ZV,getYTDSavings:v.Z,dispatchNavigate:g.o,redirectToSignIn:b.y,getAvailableCashback:N.ef,cashoutStartNavigateOmniture:O.yF,resetCalypsoRedeemCashbackState:N.uy};const $=(0,p.connect)(((e,o)=>{var t,a,n=(0,A.Mt)(o.couponContext),{cashback:s}=(0,S.KZ)(e),r=(0,S.XS)(e),{activeModalityType:i,couponContext:l,showCouponsForAnyModality:c=!0,maxClipsAllowed:u=0}=o;return{coupons:o.coupons||e.coupons.couponList,isShipModalOpen:e.couponShipModal.isOpen,couponsNumber:o.couponsNumber||(c&&e.coupons.couponsNumber[l]?e.coupons.couponsNumber[l]:i&&n.getCouponsNumbersWithCurrentModality(e,i))||[],couponsFetchError:l?n.getCouponFetchError(e):e.coupons.couponsFetchError,clippedCouponCount:e.coupons.clippedCoupons.clippedCouponCount,globalMessages:(0,R.E)(e),maxClipsAllowed:u,isAuthenticationCallReturned:(0,D.Vs)(e),cashback:s,availableCashBack:s.total,cashbackLoaded:s.loaded,showCashBack:(0,E.IQ)(e),url:null===(t=e.meta)||void 0===t||null===(a=t.location)||void 0===a?void 0:a.href,shoppersCardBalance:r}}),Z)((e=>{var o,t,n,s,r,{coupons:i,couponsNumber:l,clippedCouponCount:d,enableCouponModal:A=!0,globalMessages:S,couponsFetchError:E,omniture:O,postRemoveAction:v,mode:N,rows:g=0,unwrapSingleCard:D=!1,couponContext:b,maxClipsAllowed:R=0,className:U,inverse:k,type:w,closeCouponModal:x,shouldOpenDetailsModalInContainer:M=!1,CouponsHeadingText:H,shouldShowSimpleHeader:B,simpleHeader:F,shouldShowLinkHeader:G=!1,linkHeaderObj:K,backgroundColor:Y,CouponsHeadingTextSize:Z="s",backButtonClassNames:$,isDrawer:ee,callbackForModalText:oe,palette:te,productCardType:ae,providedCouponCardWidth:ne,shoppersCardBalance:se,isAuthenticationCallReturned:re,getYTDSavings:ie,cashback:le,redirectToSignIn:ce,dispatchNavigate:ue,getAvailableCashback:pe,resetCalypsoRedeemCashbackState:de,cashoutStartNavigateOmniture:Ce}=e,me=(0,p.useSelector)(_.Ny),Ae=l.map((e=>{var{couponNumber:o}=e;return i[o]})),Se=R>0&&Ae.filter((e=>e.addedToCard)).length>=R,Ee=X(e),Oe=J(e),[ve,Ne]=(0,u.useState)(!1),[ge,ye]=(0,u.useState)(null),_e=w&&"standard"===w[0],he=e=>{Ne(!0),"function"==typeof oe&&oe(!0),ye(e)},Te=()=>{var e=c()(i,["id",null==ge?void 0:ge.couponId]);return e?i[e]:void 0},Pe=u.createElement(u.Suspense,{fallback:null},u.createElement("div",{className:"flex sm:flex-row flex-col align-start w-full sm:pt-0 pt-8 pr-8 mb-16"},u.createElement(j,{shoppersCardBalance:se,isAuthenticationCompleted:re,getAnnualSavings:ie}),u.createElement(W,{cashback:le,isAuthenticationCompleted:re,redirectToSignIn:ce,getAvailableCashback:pe,cashoutStartNavigateOmniture:Ce,componentName:m.tt,bgColor:"bg-informative-most-prominent",pageName:m.M1,resetCalypsoRedeemCashbackState:de}))),Le=e=>{e.preventDefault(),ue({to:null==K?void 0:K.viewAllLink},{componentName:_e?m.Bi:m.tt,usageContext:"view all "+(_e?"coupons":"cashback")})},Ie=e=>{e.preventDefault(),ue({to:null==K?void 0:K.infoLink},{componentName:_e?m.Bi:m.tt,usageContext:"ways to save"})},fe=()=>u.createElement(V,{coupons:i,couponsNumber:l,couponContext:b,couponsFetchError:E,clippedCouponCount:d,globalMessages:S,dispatchOmnitureEventForViewCoupon:Ee,dispatchOmnitureViewCouponActionWithSearch:Oe,omniture:O,postRemoveAction:v,mode:N,rows:g,unwrapSingleCard:D,shouldDisableCouponCard:Se,className:U,inverse:k,type:w,shouldOpenDetailsModalInContainer:M,openDetailsView:he,palette:te,providedCouponCardWidth:ne}),De=B&&F&&(l.length||E)?u.createElement(u.Fragment,null,F," ",u.createElement(P.A,{size:"m",className:"align-middle font-normal"},"– ",l.length," Coupon",l.length>1?"s":"")):H,be=()=>De?u.createElement(L.A,{tag:"s"===Z?"h3":"m"===Z?"h2":"h1",size:me?"l":"xl",className:"font-normal font-base mt-40 mb-12 font-bold font-secondary max-w-full"},De):G?u.createElement(u.Suspense,{fallback:null},u.createElement(Q,(0,a.A)({},e,K,{headerPadding:{web:"pt-32",mobile:"pt-8"},fontColor:"text-primary",type:_e?"coupons":"cashback",viewAllOmnitureHandler:Le,infoOmnitureHandler:Ie}))):null,Re=Y?u.createElement("div",{className:"carousel-background flex flex-col "+(!De&&"items-center")+" overflow-visible relative rounded-large pb-8 sm:rounded-medium mx-0 md:mb-56 pl-8 md:px-32 "+Y},be(),w&&"cash_back"===w[0]&&Pe,fe()):u.createElement(u.Fragment,null,be(),w&&"cash_back"===w[0]&&Pe,fe());return u.createElement("div",{className:"mx-8 md:mx-0"},M&&ve?(t=Te(),n=null==ge?void 0:ge.couponIndex,s=null==ge?void 0:ge.ppr,r={componentName:"CASH_BACK"===(null==t?void 0:t.type)?C.w$.CASH_BACK_DEAL_DETAILS:C.w$.COUPON_DETAIL,coupon:t,couponIndex:n},u.createElement(u.Fragment,null,u.createElement(h.Ay,{kind:ee?"prominent":"alternate",variant:"minimal",palette:ee?"brand":"accent",compact:!0,onClick:()=>{Ne(!1),"function"==typeof oe&&oe(!1)},className:$},u.createElement(T.i,{"aria-hidden":"true",size:"m",className:"mr-4"}),"Back To Available Coupons"),u.createElement(y.A,{componentName:"CASH_BACK"===(null===(o=Te())||void 0===o?void 0:o.type)?C.w$.CASH_BACK_DEAL_DETAILS:C.w$.COUPON_DETAIL,disabled:Se,coupon:Te(),couponIndex:n,postRemoveAction:v,productSearchID:O.productSearchID,ppr:s,shouldOpenDetailsModalInContainer:M}),u.createElement(I.A,{coupon:t,dataForOmniture:r,isDrawer:ee,productCardType:ae}))):Re,A?u.createElement(u.Suspense,{fallback:null},u.createElement(z,{disabled:Se,context:b,postRemoveAction:v,productSearchID:O.productSearchID},u.createElement(I.A,{isModal:!0,productCardType:ae})),e.isShipModalOpen&&u.createElement(q,{couponContext:b,omniture:O}),u.createElement(f.A,{closeParentModal:x,componentName:O.componentName})):null)}))},610987:(e,o,t)=>{t.d(o,{A:()=>C});var a=t(416683),n=t(832875),s=t(432521),r=t(296540),i=t(118064),l=t(999643),c=t(76060),u=(e,o,t)=>a=>{a.preventDefault(),e({to:o},{componentName:t,usageContext:"view ship offers"})};const p=e=>{var{navigate:o,url:t,componentName:a}=e,n=r.createElement(r.Fragment,null,"Coupons, Cash Back and Weekly Ads don't apply to ship orders at this time, but there are other discounts to explore!",r.createElement(i.A,{size:"s",href:t,className:"block text-center mt-4",onClick:u(o,t,a)},"View Ship Savings"));return r.createElement("div",{className:"my-16 sm:my-32 px-32 sm:px-0"},r.createElement(c.A,{containerClassName:"sm:px-8",iconImage:r.createElement(l.k,{size:"l"}),message:n,messageClassName:"text-left mb-0"}))};var d={navigate:s.o};const C=(0,a.connect)((e=>({url:""+(0,n.jz)(e)})),d)(p)},315646:(e,o,t)=>{t.d(o,{S3:()=>s,xA:()=>n});var a=t(405173),n=(e,o)=>((e,o)=>{return t=e.isAuthenticationCompleted,a=o.isAuthenticationCompleted,t!==a&&o.isAuthenticationCompleted;var t,a})(e,o)&&o.isAuthenticated,s=e=>e.coupons[a.Ay.COUPON_STATUS][a.Ay.MAX_CLIPPED_COUPONS_LIMIT_REACHED]},746266:(e,o,t)=>{t.d(o,{Ru:()=>A,ef:()=>d,uy:()=>C});var a=t(310467),n=t(800064),s=t(652006),r=t(76762),i=t(183043),l=t(556475),c=t(706037),u=t(166234),p=function(){var e=(0,a.A)((function*(e,o,t,a){try{yield e(n.useCases.savingsCoupons.getCashback.reset(i.hP.keySpace)),yield e(n.useCases.savingsCoupons.getCashback.fetch(a,i.hP.keySpace,t))}catch(e){}var l=o(),c=n.useCases.savingsCoupons.getCashback.selectors.errors(i.hP.keySpace)(l);if(c){var p=Array.isArray(c)?c:[c];p.forEach((e=>{(0,u.V)(e,t,"post /atlas/v1/savings-coupons/v1/cashback-balances")})),p.some((e=>(0,r.FK)(e)))&&e((0,s.y)())}return Promise.resolve()}));return function(o,t,a,n){return e.apply(this,arguments)}}(),d=e=>(o,t)=>p(o,t,e,["cashback.compact"]),C=()=>function(){var e=(0,a.A)((function*(e){yield e(n.useCases.savingsCoupons.redeemCashback.reset(i.hP.keySpace))}));return function(o){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.A)((function*(e){var{page:o,requestBody:t,dispatch:a,getState:l,omnitureAction:c}=e,p={page:o,component:"cashout modal"};try{yield a(n.useCases.savingsCoupons.redeemCashback.post(t,i.hP.keySpace,{page:o,component:"cashout modal"}))}catch(e){}var d=l(),C=n.useCases.savingsCoupons.redeemCashback.selectors.errors(i.hP.keySpace)(d);if(C){var m=Array.isArray(C)?C:[C];m.forEach((e=>{(0,u.V)(e,p,"post /atlas/v1/savings-coupons/v1/cashback-redemptions")})),m.some((e=>(0,r.FK)(e)))&&a((0,s.y)())}else c(a);return Promise.resolve()}));return function(o){return e.apply(this,arguments)}}(),A=e=>{var{page:o,userId:t,accountType:a,amount:n,payPalBalance:s,shoppersCardBalance:r,fireUpdatedSuccessAnalytics:u=!1}=e,p=a===i.yR.PAYPAL,d=p?l.w$.CASHOUT_PAYPAL:l.w$.CASHOUT_SHOPPERS_CARD,C=(p?"paypal email":"shoppers card amount")+" confirmation";return(e,l)=>{var p={accountType:a,amount:Number(n)};a===i.yR.PAYPAL&&(p.paypalId=t);var A=u?(0,c.Mg)({componentName:d,flowStepDescription:C,payPalBalance:s,shoppersCardBalance:r,cashedOutAmount:n}):(0,c.bn)({componentName:d,flowStepDescription:C,payPalBalance:s,shoppersCardBalance:r,cashedOutAmount:n});return m({page:o,requestBody:p,dispatch:e,getState:l,omnitureAction:A})}}},690307:(e,o,t)=>{t.d(o,{HH:()=>T,Pu:()=>_,cU:()=>g,do:()=>y,rJ:()=>h,sx:()=>N});var a=t(58168),n=t(723157),s=t(154271),r=t(432521),i=t(30536),l=t(369465),c=t(405173),u=t(183043),p=t(706037),d=t(303211),C=e=>e().coupons[c.Ay.CLIPPED_COUPONS][c.Ay.CLIPPED_COUPON_COUNT],m=(e,o)=>{o=o||l.pz;var t=(0,n.E)(e()),a=null==t?void 0:t.filter((e=>e.body===o.body));return(null==a?void 0:a.length)>0},A="Remove Action",S=(e,o,t)=>{var a,n=o===A?l.jB:l.I8,s="CASH_BACK"===(null==t?void 0:t.type)?l.Ai:l.jf;return(a=e.code)in s&&(n=s[a]),void 0===n&&(n=a+": "+e.reason),{subStatusCode:a,errorMessage:n,url:e.request?e.request.url:"no relevant value"}},E=(e,o,t)=>{C(o)===u._O?(l.pz.fixed=!0,e((0,s.rG)(l.pz)),t&&e((0,p.Jg)(null==t?void 0:t.componentName))):m(o,l.pz)&&e((0,s.Y6)(l.pz))},O=(e,o)=>{var{dispatch:t,getState:a}=e;o?(l.xQ.fixed=!0,t((0,s.rG)(l.xQ))):m(a,l.xQ)&&t((0,s.Y6)(l.xQ))},v=(e,o)=>{var{dispatch:t,getState:n}=o;t((0,a.A)({type:i.hF},e));var s=e.subStatusCode===l.MG||e.maxCouponLimitReached;s&&O({dispatch:t,getState:n},s)},N=e=>{var{coupon:o}=e;return(e,t)=>{v({krogerCouponNumber:o.krogerCouponNumber,maxCouponLimitReached:!0},{dispatch:e,getState:t})}},g=()=>e=>{var{coupon:o}=e;return(e,t)=>{v({krogerCouponNumber:o.krogerCouponNumber,couponExpired:!0,subStatusCode:l.fZ},{dispatch:e,getState:t})}},y=(e,o,t,a,n)=>s=>{var{coupon:r,couponIndex:c,ppr:d}=s;return(s,m)=>{var A=()=>{s({coupon:r,type:i.Uo,krogerCouponNumber:r&&r.krogerCouponNumber}),r&&r.type===u.cF.STANDARD&&(s({coupon:r,type:i.my,updateType:u.Wl.CLIP}),t&&t()),E(s,m,o);setTimeout((()=>s({type:i.yZ,krogerCouponNumber:r&&r.krogerCouponNumber})),u.P$)},O=e=>{var{subStatusCode:o}=S(e,"Add Action",r);o===l.W5?A():(v({krogerCouponNumber:r&&r.krogerCouponNumber,subStatusCode:o,statusCode:e.statusCode||e.code,clippedCouponCount:C(m),maxCouponLimitReached:e.code&&e.code===l.MG},{dispatch:s,getState:m}),a&&a())};if(C(m)<u.xH)return s({type:i.ho,krogerCouponNumber:r&&r.krogerCouponNumber}),e({coupon:r,dispatch:s,getState:m,handlers:{successHandler:()=>{(0,p.wd)(o)({coupon:r,couponIndex:c,ppr:d})(s),A()},errorHandler:O,callbackHandler:()=>{null==n||n(!0)}},origin:{componentName:null==o?void 0:o.componentName,errorCategory:"coupon"}});O({reason:"This card already been loaded with maximum number of offers.",code:"TooManyCouponsOnCard"})}},_=(e,o,t,a,n,s)=>r=>{var{coupon:l,couponIndex:c,ppr:d}=r;return(r,C)=>{r({type:i.$t,krogerCouponNumber:l&&l.krogerCouponNumber});return e({coupon:l,dispatch:r,getState:C,handlers:{successHandler:()=>{r({type:i.SM,krogerCouponNumber:l&&l.krogerCouponNumber,coupon:l}),l&&l.type===u.cF.STANDARD&&r({coupon:l,type:i.my,updateType:u.Wl.UNCLIP}),E(r,C,o),O({dispatch:r,getState:C},!1),t&&t(l,r),(0,p.px)(o)({coupon:l,couponIndex:c,ppr:d})(r),a&&a()},errorHandler:e=>{var{subStatusCode:o}=S(e,A,l);r({type:i.Tb,krogerCouponNumber:l&&l.krogerCouponNumber,subStatusCode:o,coupon:l}),n&&n()},callbackHandler:()=>{null==s||s(!1)}},origin:{componentName:null==o?void 0:o.componentName,errorCategory:"coupon"}})}},h=(e,o)=>{var t={type:i.qs,payload:{coupon:e}};o((0,d.Oo)()),o(t),o({type:i.hy,payload:{brandName:e.brandName,categories:e.categories,specialSavings:e.specialSavings.map((e=>e.name))}})},T=()=>(0,r.o)("/account/update")},673353:(e,o,t)=>{t.d(o,{N:()=>c});var a=t(58168),n=t(30536),s=t(680310),r=t(706037),i=t(183043),l=t(589569),c=function(e,o,t){return void 0===t&&(t=i.QW),(i,c)=>{var{componentName:u,coupon:p}=o,d={id:t,calypsoParams:{"filter.krogerCouponNumber":[e],"filter.type":"string"==typeof p.type?[p.type.toLowerCase()]:p.type,projections:["coupons.full"]}},C={requestHandler:(0,l.OX)([n.b8],i),successHandler:e=>(e=>{var a=e.data,s=o?o.coupon.specialSavings.map((e=>e.name)):[];if(a.length<=0&&!s.includes("4XGCEVENT")){var l=(0,r.RB)(o);i(l)}return i({type:n.uy,payload:{upcs:e.data,keySpace:t}})})(e),errorHandler:e=>{e||i({type:n.tE,payload:{keySpace:t}})}};return(0,s.V)((0,a.A)({request:d},C,{dispatch:i,getState:c,origin:{page:u,component:u}}))}}},303211:(e,o,t)=>{t.d(o,{Kp:()=>i,Oo:()=>s,aQ:()=>r,qf:()=>n});var a=t(30536),n=e=>{var{couponContext:o,couponId:t,couponIndex:n,ppr:s}=e;return{payload:{couponContext:o,couponId:t,couponIndex:n,ppr:s},type:a.zK}},s=()=>({type:a.F4}),r=e=>{var{coupon:o,couponContext:t}=e;return(e,n)=>{var{couponShipModal:s}=n(),{isOpenedOnce:r}=s;r||e({type:a.cu,payload:{couponNumber:o.krogerCouponNumber,couponContext:t}})}},i=()=>e=>{e({type:a.aY})}},680310:(e,o,t)=>{t.d(o,{V:()=>y,I:()=>_});var a=t(310467),n=t(800064),s=t(652006),r=t(76762),i=t(58168),l=t(198587),c=t(333031),u=t.n(c),p=t(962193),d=t.n(p),C=t(965873),m=t(183043),A=["brand","monetizationDetails"],S=["brand","monetizationDetails"],E=e=>(0,C.hF)(e).reduce(((o,t)=>(o[t]=e[t],"filter.modality"===t&&(o[t]=o[t].map((e=>e.toUpperCase()))),o)),{}),O=(e,o)=>{var t={data:{coupon:{},clippedCount:0}};if(!d()(e)){var a,n,s=e[0],{brand:r,monetizationDetails:c}=s,u=(0,l.A)(s,S),p="userSavingsInfoByType"in o&&(null===(a=o.userSavingsInfoByType)||void 0===a||null===(n=a.standard)||void 0===n?void 0:n.clippedCount)||0;t.data={coupon:(0,i.A)({brandName:r,monetized:c},u),clippedCount:p}}return t},v=(e,o)=>{var t,a,n=(t=e,Array.isArray(t)&&t.reduce(((e,o)=>{var{brand:t,monetizationDetails:a}=o,n=(0,l.A)(o,A);return e.coupons[o.krogerCouponNumber]=(0,i.A)({brandName:t},a&&{monetized:a},n),e.couponsNumber.push(o.krogerCouponNumber.toString()),e}),{coupons:{},couponsNumber:[]})||[]);"filterSummaryByType"in o?n.count=(null===(a=o.filterSummaryByType)||void 0===a?void 0:a.totalCount)||0:n.count=0;var s="filterSummaryByType"in o?(e=>{var o,t,a,n={brands:[],categories:[],offers:[],newCouponsCount:0};return n.brands=(null==e||null===(o=e.brands)||void 0===o?void 0:o.options)||[],n.categories=u()(null==e||null===(t=e.categories)||void 0===t?void 0:t.options,"name")||[],n.offers=(null==e||null===(a=e.specialSavings)||void 0===a?void 0:a.options)||[],n.newCouponsCount=(null==e?void 0:e.newCouponsCount)||0,n})(o.filterSummaryByType):{},{clippedCount:r,clippedSavingsTotalValue:c,expiringCount:p,unclippedCount:d}=(e=>{var{userSavingsInfoByType:o}=e;if(1===Object.keys(o).length){var t=Object.keys(o)[0],{clippedCount:a=0,expiringCount:n=0,clippedSavingsTotalValue:s=0,unclippedCount:r=0}=o[t];return{clippedCount:a,expiringCount:n,clippedSavingsTotalValue:s,unclippedCount:r}}var{cashback:{clippedCount:i,expiringCount:l,clippedSavingsTotalValue:c,unclippedCount:u},standard:{clippedCount:p,expiringCount:d,clippedSavingsTotalValue:C,unclippedCount:m}}=o;return{clippedCount:i+p||0,expiringCount:l+d||0,clippedSavingsTotalValue:c+C||0,unclippedCount:u+m||0}})(o);return{data:{couponData:(0,i.A)({},n),clippedCount:r,clippedCouponSavings:c,expiringCount:p,unclippedCount:d,couponFilters:s}}},N=e=>{var o,t,a,s,r,i,{requestId:l,state:c}=e,p=(null===(o=(t=n.useCases.savingsCoupons.getCoupons.selectors).get)||void 0===o||null===(a=o.call(t,l))||void 0===a?void 0:a(c))||[],C=(null===(s=(r=n.useCases.savingsCoupons.getCoupons.selectors).getMeta)||void 0===s||null===(i=s.call(r,l))||void 0===i?void 0:i(c))||{},A={[m.VD]:()=>O(p,C),[m.xT]:()=>O(p,C),[m.QW]:()=>(e=>({data:e[0]&&"upcs"in e[0]?e[0].upcs:[]}))(p),default:()=>v(p,C),[m.Bw]:()=>((e,o)=>{var t,a,n={data:{printData:[],totalSavings:"userSavingsInfoByType"in o?null==o||null===(t=o.userSavingsInfoByType)||void 0===t||null===(a=t.standard)||void 0===a?void 0:a.clippedSavingsTotalValue:0}};if(!d()(e)){var s=e.reduce(((e,o)=>{var{expirationDate:t,requirementDescription:a,shortDescription:n,title:s}=o,r={expirationDate:t,reqDescription:a,shortDescription:n,title:s},i=o.categories.sort()[0];return e[i]=[...e[i]||[],r],e}),{});n.data.printData=u()(Object.keys(s).map((e=>({category:e,coupons:s[e]}))),["category"])}return n})(p,C),[m.cX]:()=>{var e;return{data:null===(e=v(p,C))||void 0===e?void 0:e.data.couponData}}};return A[l]?A[l]():/^\d{12}$/gm.test(l)?A[m.QW]():A.default()},g=function(){var e=(0,a.A)((function*(e){var o,t,{request:a,dispatch:i,errorHandler:l,successHandler:c,getState:u,origin:p}=e,d=a.id,C=E(a.calypsoParams),m=(null===(o=a.calypsoParams)||void 0===o?void 0:o.projections)||["coupons.compact"];try{yield i(n.useCases.savingsCoupons.getCoupons.reset(d)),yield i(n.useCases.savingsCoupons.getCoupons.fetch(C,m,d,p))}catch(e){return l(e),Promise.resolve()}var A=u(),S=n.useCases.savingsCoupons.getCoupons.selectors.errors(d)(A),O=null===(t=n.useCases.savingsCoupons.getCoupons.selectors.async(d))||void 0===t?void 0:t(A),v=(null==O?void 0:O.loading)||!1;return S?(l(S),Array.isArray(S)?S.forEach((e=>{(0,r.FK)(e)&&i((0,s.y)())})):(0,r.FK)(S)&&i((0,s.y)())):v||c(N({requestId:a.id,state:A})),Promise.resolve()}));return function(o){return e.apply(this,arguments)}}(),y=e=>{var o,{request:t,requestHandler:a,successHandler:s,errorHandler:r,dispatch:i,getState:l,origin:c}=e,u=null===(o=n.useCases.modalityPreferences.selectors.async(l()))||void 0===o?void 0:o.loaded,p="getCouponMetaDetails"===t.id;return u||p?(a&&a(),g({dispatch:i,errorHandler:r,successHandler:s,getState:l,request:t,origin:c})):null},_=e=>{var{origin:o,keySpace:t,filters:i,projections:l}=e;return function(){var e=(0,a.A)((function*(e,a){try{yield e(n.useCases.savingsCoupons.getCoupons.reset(t)),yield e(n.useCases.savingsCoupons.getCoupons.fetch(E(i),l||["coupons.compact"],t,o))}catch(e){}var c=a(),u=n.useCases.savingsCoupons.getCoupons.selectors.errors(t)(c);u&&(Array.isArray(u)?u.forEach((o=>{(0,r.FK)(o)&&e((0,s.y)())})):(0,r.FK)(u)&&e((0,s.y)()))}));return function(o,t){return e.apply(this,arguments)}}()}},589569:(e,o,t)=>{t.d(o,{BX:()=>y,FZ:()=>P,MQ:()=>S,NA:()=>E,OX:()=>g,eD:()=>T,gf:()=>N,gw:()=>_,o7:()=>h,oj:()=>A,r_:()=>v});var a=t(58168),n=t(236157),s=t(652006),r=t(30536),i=t(183043),l=t(706037),c=t(556475),u=t(795868),p=function(e,o,t){return void 0===t&&(t={}),o({type:e,payload:t})},d=(e,o)=>void 0!==e.authenticated&&(0,n.Kc)(o())!==e.authenticated,C=(e,o)=>{var{response:t,successActions:a}=e,{dispatch:n}=o,s=(e=>({[r.kg]:{couponData:e.data.couponData,clippedCount:e.data.clippedCount,unClippedCount:e.data.unclippedCount},[r.LD]:{coupon:e.data.coupon},[r.uv]:e.data.couponFilters,[r.M2]:{clippedCount:e.data.clippedCount},[r.Gr]:e.data,[r.IS]:e.data,[r.Br]:e.data,[r.AV]:e.data,[r.PU]:e.data,[r.ts]:e.data.couponFilters}))(t);(Array.isArray(a)?a:[a]).forEach((e=>{p(e,n,s[e])}))},m=(e,o,t)=>{var a,{couponContext:n,response:r,successActions:i}=e,l=null==r||null===(a=r.data)||void 0===a?void 0:a.couponData,c=l||r.data;return d(c,t)?(o((0,s.y)()),!1):(l&&(r.data.couponData.couponContext=n),C({response:r,successActions:i},{dispatch:o,getState:t}),!0)},A=(e,o,t)=>{var{couponContext:a,successAction:n}=e;return e=>{d(e.data,t)?o((0,s.y)()):(e.data.couponContext=a,p(n,o,e.data))}},S=(e,o,t)=>{var{couponContext:n,successAction:r}=e;return e=>{d(e.data,t)?o((0,s.y)()):(e.data.couponContext=n,p(r,o,{couponData:(0,a.A)({},e.data.couponData,{couponContext:n})}))}},E=(e,o)=>{var{successAction:t}=e;return e=>{p(t,o,e.data)}},O=(e,o)=>{var{errorAction:t,couponContext:n}=e;return function(e,r){void 0===r&&(r=!1),r||(n&&(e.couponData=(0,a.A)({},e.couponData,{couponContext:n})),p(t,o,e),e.statusCode===i.h1.FORBIDDEN&&o((0,s.y)()))}},v=(e,o)=>{var{errorAction:t,request:a,couponContext:n}=e;return(e,s)=>{O({errorAction:t,request:a,couponContext:n},o)(e,s)}},N=(e,o)=>{var{errorActions:t,request:a,couponContext:n}=e;return(e,s)=>{t.forEach((t=>{v({errorAction:t,request:a,couponContext:n},o)(e,s)}))}},g=(e,o)=>()=>{e.forEach((e=>{o({type:e})}))},y=(e,o,t)=>()=>{e.forEach((e=>{t({type:e,payload:{couponData:{couponContext:o}}})}))},_=(e,o,t)=>{var{couponContext:a,successActions:n}=e;return e=>{m({couponContext:a,response:e,successActions:n},o,t)}},h=(e,o,t)=>{var{couponContext:n,successActions:s,isNewFilterSelected:r}=e;return e=>{if(m({couponContext:n,response:e,successActions:s},o,t)&&r){var i=t().couponsFilters&&t().couponsFilters.searchString;((e,o)=>{var{couponData:t,selectedFilters:a,couponContext:n,isAllCouponsClicklistToggled:s}=o,r=(0,c.fR)(n),i=!1;0!==a.searchString.length&&(i=!0);var p=(0,u.o)(a,r,s);t&&t.count>0&&e((0,l.NB)(r,p,i))})(o,{couponData:e.data.couponData,selectedFilters:(0,a.A)({},t().selectedCouponsFilters,{searchString:i}),couponContext:n,isAllCouponsClicklistToggled:t().couponsFilters.isAllCouponsClicklistToggled})}}},T=(e,o,t)=>{var{successActions:a}=e;return e=>{d(e.data,t)?o((0,s.y)()):C({response:e,successActions:a},{dispatch:o,getState:t})}},P=(e,o)=>{var{errorActions:t,tabId:n}=e;return(e,r)=>{r||(void 0!==n&&(e.couponData=(0,a.A)({},e.couponData,{couponContext:n})),t.forEach((t=>{p(t,o,e)})),e.statusCode===i.h1.FORBIDDEN&&o((0,s.y)()))}}},401533:(e,o,t)=>{t.d(o,{rB:()=>p,vj:()=>u});var a=t(58168),n=t(310467),s=t(652006),r=t(76762),i=t(800064),l=t(166234),c=function(){var e=(0,n.A)((function*(e){var{action:o,coupon:t,dispatch:a,getState:n,handlers:{successHandler:c,errorHandler:u,callbackHandler:p},keySpace:d,origin:{componentName:C="coupons",errorCategory:m}}=e;try{var A;yield a(i.useCases.savingsCoupons.clipUnclip.post({action:o,couponId:null==t||null===(A=t.id)||void 0===A?void 0:A.toString()},d,{page:m,component:C}))}catch(e){return u(e),Promise.resolve()}var S=n(),E=i.useCases.savingsCoupons.clipUnclip.selectors.errors(d)(S);if(E){var O=Array.isArray(E)?E:[E];O.forEach((e=>{(0,l.V)({statusCode:e.statusCode,reason:e.reason},{page:m,component:C},"post /atlas/v1/savings-coupons/v1/clip-unclip")})),u(O[0]),O.some((e=>(0,r.FK)(e)))&&a((0,s.y)())}else c(i.useCases.savingsCoupons.clipUnclip.selectors.get(d)(S)),null==p||p();return Promise.resolve()}));return function(o){return e.apply(this,arguments)}}(),u=e=>{var o,{coupon:t}=e;return c((0,a.A)({},e,{action:"CLIP",keySpace:(o=null==t?void 0:t.id,"clipCoupon/"+o)}))},p=e=>{var o,{coupon:t}=e;return c((0,a.A)({},e,{action:"UNCLIP",keySpace:(o=null==t?void 0:t.id,"unclipCoupon/"+o)}))}},897171:(e,o,t)=>{t.d(o,{h3:()=>n,u1:()=>s,wX:()=>r});var a=t(30536),n=()=>e=>{e({type:a.Qr})},s=e=>o=>{o({type:a.K7,couponContext:e})},r=(e,o)=>{e({type:a.TV}),e({type:a.m6}),e({type:a.D0}),e({type:a.QQ}),e({type:a.vn,payload:{checked:!1}}),e({type:a.eY}),((e,o)=>{o&&o.sorttype?e({type:a.YW,sortType:o.sorttype}):e({type:a.Lr})})(e,o)}},757818:(e,o,t)=>{t.d(o,{DB:()=>E,mx:()=>A,FG:()=>S,hl:()=>O});var a=t(58168),n=t(962193),s=t.n(n),r=t(30536),i=t(183043),l=t(965873),c=t(680310),u=t(589569),p=t(432521),d=t(405173),C=t(583440),m=t(897171),A=(e,o)=>(t,n)=>{var s=n(),p=e.displayedCoupons,C=n().coupons[d.Ay.RECENTLY_CLIPPED_COUPONS],m=(0,l.rW)(e),A={id:"getCoupons",method:"POST",calypsoParams:(0,a.A)({},m,{"page.offset":(null==p?void 0:p.length)>0?p.length-C.length:i.g0}),body:{displayedCoupons:p,[d.Ay.RECENTLY_CLIPPED_COUPONS]:C},headers:(0,l.df)(s)},S=(0,u.MQ)({couponContext:o,successAction:r.kg},t,n),E={url:i.xg[o]},O={requestHandler:(0,u.OX)([r.kA],t),successHandler:S,errorHandler:(0,u.r_)({errorAction:r.Gr,couponContext:o,request:E},t)};return(0,c.V)((0,a.A)({request:A},O,{dispatch:t,getState:n,origin:{page:o.toLowerCase().includes("cash")?"cashback":"coupons",component:o}}))},S=(e,o)=>(t,a)=>{var n=a().coupons,s={coupon:Object.values(n.couponList).find((e=>o===e.id))};t({type:r.LD,payload:s}),(e=>o=>{o((0,p.o)(e))})(e)(t)},E=(e,o,t)=>(n,i)=>{var p=i(),{searchString:d,selectedBrands:C,selectedCategories:m,selectedSpecialSavings:A,maxItems:S,offers:E,excludeOffers:O,status:v="NONE",type:N,selectedUpcs:g,selectedModalities:y}=e,_=e.newCouponsSelected?e.newCouponsSelected.toString():"false",h=!s()(C)||!s()(m)||!s()(A)||!s()(g)||e.newCouponsSelected,T=(0,a.A)({"filter.brand":C,"filter.category":m,"filter.searchString":d,"filter.specialSavings":A,"filter.type":"string"==typeof N?[N.toLowerCase()]:N,"page.size":S||200,"filter.upc":g,"filter.modality":y,"filter.onlyNewCoupons":_,"filter.status":"NONE"===v?["unclipped","active"]:v.toLowerCase()},h?{"filter.alwaysIncludedKrogerCouponNumbers":E}:{"filter.krogerCouponNumber":E},{"filter.excludedKrogerCouponNumber":O}),P={method:"GET",id:o,headers:(0,l.df)(p),calypsoParams:T},L=(0,u.gw)({couponContext:o,successActions:[r.kg,r.M2,r.PU]},n,i),I={requestHandler:(0,u.BX)([r.kA,r.nA],o,n),successHandler:L,errorHandler:(0,u.gf)({errorActions:[r.Gr,r.Uk],request:P,couponContext:o},n)};return(0,c.V)((0,a.A)({request:P},I,{dispatch:n,getState:i,origin:t}))},O=function(e,o,t){return void 0===t&&(t="getCoupons"),(n,s)=>{(0,m.wX)(n,o);var p=(0,l.DD)(o),d=o.showclipped,A=d&&"true"===d.toLowerCase()||e===i.wn.BY_DEPARTMENT,S=(0,l.oL)({tabId:e,showClippedBoolean:A,id:t},p,s),E=[r.Qr,r.hI,r.kA,r.sy,r.YC,r.nA],O=[r.kg,r.uv,r.M2,r.PU],v=[r.Gr,r.Br,r.IS,r.Uk],N=(0,u.o7)({couponContext:e,successActions:O},n,s),g={requestHandler:(0,u.OX)(E,n),successHandler:N,errorHandler:(0,u.FZ)({errorActions:v,tabId:e,request:S},n)},y=(0,c.V)((0,a.A)({request:S},g,{dispatch:n,getState:s,origin:{page:e.toLowerCase().includes("cash")?"cashback":"coupons",component:e}}));return y?y.then((()=>(0,C.vm)(p,e,n))):Promise.resolve()}}},583440:(e,o,t)=>{t.d(o,{Y_:()=>v,t6:()=>N,vm:()=>S});var a=t(58168),n=t(355364),s=t.n(n),r=t(762216),i=t.n(r),l=t(962193),c=t.n(l),u=t(183043),p=t(965873),d=t(30536),C=t(589569),m=t(680310),A=t(405173),S=(e,o,t)=>{if(!c()(e)&&o!==u.wn.CLIPPED_COUPONS){var a=i()(e.brand)?[]:[].concat(e.brand),n=i()(e.category)?[]:[].concat(e.category),s=i()(e.savings)?[]:[].concat(e.savings),r=i()(e.modalities)?[]:[].concat(e.modalities),l=!i()(e.newCoupons)&&e.newCoupons;t({type:d.ZG,payload:{brands:a,categories:n,specialSavings:s,modalities:r,newCoupons:l}})}},E=e=>{var o,t,n=e().selectedCouponsFilters[u.Tg],s=e().selectedCouponsFilters[u.pg],r=e().selectedCouponsFilters[u._H],i=e().selectedCouponsFilters[u.m_],l=e().couponsTabReducer.tabSelected,c=e().selectedCouponsFilters.newCouponsChecked,p=e().sortDropDown.selectedSortType,d=null!==(o=null===(t=e().couponsFilters)||void 0===t?void 0:t.searchString)&&void 0!==o?o:void 0,C={selectedBrands:n,selectedCategories:s,selectedSpecialSavings:i,selectedModalities:r,selectedTab:l,sortType:p,newCouponsSelected:c,searchString:d};return d?(0,a.A)({},C,{searchString:d}):C},O=e=>[u.si,u.YW].includes(null==e?void 0:e.value),v=function(e,o){return void 0===o&&(o={value:void 0}),(t,n)=>{var r=E(n),i=n().couponsTabReducer.tabSelected,l=((e,o)=>{var t=o(),n=t.coupons[A.Ay.RECENTLY_CLIPPED_COUPONS],r=e.newCouponsSelected?e.newCouponsSelected.toString():"false",{selectedBrands:i,selectedCategories:l,selectedSpecialSavings:c,selectedModalities:d,sortType:C,searchString:m,selectedTab:S}=e,E={brand:i,category:l,specialSaving:c,modalities:d,sortType:C,searchString:m,newCoupons:r},O={"filter.brand":i,"filter.category":l,"filter.specialSavings":c,"filter.modality":d,"filter.sort":C,"filter.searchString":m,"filter.onlyNewCoupons":r};if(S===u.wn.CLIPPED_COUPONS)s()(O,{"filter.status":"active","page.size":u.Jw});else if(S===u.wn.LOADED_CASHBACK)s()(E,{type:u.cF.CASH_BACK}),s()(O,{"filter.status":"active","filter.type":["cash_back"],"page.size":u.Jw});else{S===u.wn.ALL_CASHBACK&&(s()(E,{type:u.cF.CASH_BACK}),s()(O,{"filter.type":["cash_back"],"page.size":u.yQ}));var v=(0,a.A)({"filter.status":S!==u.wn.BY_DEPARTMENT&&S!==u.wn.ALL_COUPONS&&S!==u.wn.ALL_CASHBACK?"unclipped":["unclipped","active"]},S!==u.wn.BY_DEPARTMENT?{"page.size":u.yQ}:{});s()(O,v)}return{method:u.B1.POST,body:{[A.Ay.RECENTLY_CLIPPED_COUPONS]:n},id:"getCoupons",calypsoParams:O,headers:(0,p.df)(t)}})(r,n),c=O(o)?d.Mc:d.VP,S=[d.nQ,c],v=[d.kg,d.uv,d.M2],N=[d.Gr,d.Br,d.IS],g=(0,C.o7)({couponContext:i,successActions:v,isNewFilterSelected:e},t,n),y={errorActions:N,tabId:i,request:{url:u.e6[i]}},_={requestHandler:(0,C.OX)(S,t),successHandler:g,errorHandler:(0,C.FZ)(y,t)};return(0,m.V)((0,a.A)({request:l},_,{dispatch:t,getState:n,origin:{page:i.toLowerCase().includes("cash")?"cashback":"coupons",component:i.toLowerCase()}}))}},N=function(e,o){return void 0===o&&(o={value:void 0}),(t,n)=>{var r=E(n),{selectedBrands:i,selectedCategories:l,selectedSpecialSavings:c,selectedModalities:p,sortType:A,searchString:S,selectedTab:v}=r,N={brand:i,category:l,specialSavings:c,modalities:p,couponsCountPerLoad:u.Jw,sortType:A},g={"filter.brand":i,"filter.category":l,"filter.specialSavings":c,"filter.modality":p,"filter.sort":A,"page.size":u.Jw,"filter.status":"redeemed"};v===u.wn.LOADED_CASHBACK&&(s()(N,{type:u.cF.CASH_BACK}),s()(g,{"filter.type":["cash_back"]})),v===u.wn.ALL_COUPONS&&(s()(N,{searchString:S}),s()(g,{"filter.searchString":S}));var y={method:u.B1.GET,params:N,calypsoParams:g,id:"getCoupons"},_=O(o)?d.Mc:d.VP,h=[d.nQ,_],T=[d.kg,d.uv],P=[d.Gr,d.Br,d.IS],L=(0,C.o7)({couponContext:v,successActions:T,isNewFilterSelected:e},t,n),I={errorActions:P,tabId:v,request:{url:u.e6[v]}},f={requestHandler:(0,C.OX)(h,t),successHandler:L,errorHandler:(0,C.FZ)(I,t)};return(0,m.V)((0,a.A)({request:y},f,{dispatch:t,getState:n,origin:{page:v.toLowerCase().includes("cash")?"cashback":"coupons",component:v.toLowerCase()}}))}}},706037:(e,o,t)=>{t.d(o,{AT:()=>I,Ak:()=>d,C$:()=>_,Ew:()=>T,Jg:()=>O,Kr:()=>g,Mg:()=>f,NB:()=>N,PC:()=>h,PN:()=>L,RB:()=>v,ZV:()=>m,bn:()=>P,lJ:()=>E,px:()=>S,wL:()=>y,wd:()=>A,yF:()=>D,yc:()=>C});var a=t(58168),n=t(385424),s=t(315249),r=t(556475),i=t(369465),l=t(455902),c=t(183043),u=t(795868),p=(e,o,t)=>{var n,r,{coupon:i,couponIndex:l,ppr:c}=t;return(0,a.A)({},e,{componentName:null==e?void 0:e.componentName,productSearchID:null==e?void 0:e.productSearchID,usageContext:o,itemIndex:l?Number(l)+1:1,couponData:{couponBrand:(null==i?void 0:i.brandName)||(null==i?void 0:i.brand),couponCategory:null==i?void 0:i.categories,couponDesc:null==i?void 0:i.shortDescription,couponID:null==i||null===(n=i.id)||void 0===n?void 0:n.toString(),couponLoaded:null==i?void 0:i.addedToCard,couponNumberOfUses:null==i?void 0:i.redemptionsAllowed,couponProductsNeeded:null==i?void 0:i.requirementQuantity,couponType:null==i?void 0:i.title,couponSavings:Number((null==i?void 0:i.savings)||0),digitalShelfPlacement:{tabName:null==e?void 0:e.tabName,itemIndex:Number(l)+1,numberOfItemsPerRow:c},krogerCouponNumber:null==i?void 0:i.krogerCouponNumber,modalities:null==i?void 0:i.modalities,kpm:!1,placementId:""},payloadIdentification:null!==(r=null==e?void 0:e.payloadIdentification)&&void 0!==r?r:[{producedBy:s.g.Savings}],isLocalSearch:!1})},d=e=>o=>{var t=r.YP.loadMoreCoupons;e!==r.w$.CASH_BACK_DEALS&&e!==r.w$.MY_CASH_BACK_DEALS||(t=r.YP.loadMoreCashbackDeals),o({type:r.CA.SEAMLESS_NAVIGATE_NO_NAVIGATION,payload:{componentName:e,usageContext:t,dataClassification:r.y7.HPLPI}})},C=(e,o)=>t=>{t({type:r.CA.SORT_SELECTED,payload:{componentName:e.componentName,usageContext:e.usageContext,sortProductsBy:r.gA[o]}})},m=(e,o)=>t=>{var n,s,i=r.YP.viewCoupon,l=r.CA.CLICK_MORE;null!==(n=o.coupon)&&void 0!==n&&n.type&&"CASH_BACK"===(null===(s=o.coupon)||void 0===s?void 0:s.type)&&(i=r.YP.viewCashBackDeal,l=r.CA.VIEW_CASHBACK_DEAL);var c,u=p(e,i,o);((null==e?void 0:e.componentName)===r.w$.COUPON_SEARCH_FILTER&&(u=(0,a.A)({},u,{isLocalSearch:!0,componentName:r.w$.ALL_COUPONS})),"savings center cashback"===(null==e?void 0:e.componentName)&&(u=(0,a.A)({},u,{componentName:"savings center"})),o.coupon&&"monetized"in o.coupon&&o.coupon.monetized)?(u.couponData.kpm=!0,null!==(c=o.coupon.monetized)&&void 0!==c&&c.placementId&&(u.couponData.placementId=o.coupon.monetized.placementId)):u.couponData.kpm=!1;t({type:l,payload:u})},A=e=>o=>t=>{var n,s=r.CA.ADD_TO_CARD,i=r.YP.addToCard;null!=o&&null!==(n=o.coupon)&&void 0!==n&&n.type&&"CASH_BACK"===o.coupon.type&&(s=r.CA.CASH_BACK_LOAD_TO_CARD,i=r.YP.loadCashBackDeal);var l,c=p(e,i,o);((null==e?void 0:e.componentName)===r.w$.COUPON_SEARCH_FILTER&&(c=(0,a.A)({},c,{isLocalSearch:!0,componentName:r.w$.ALL_COUPONS})),o.coupon&&"monetized"in o.coupon&&o.coupon.monetized)?(c.couponData.kpm=!0,null!==(l=o.coupon.monetized)&&void 0!==l&&l.placementId&&(c.couponData.placementId=o.coupon.monetized.placementId)):c.couponData.kpm=!1;t({type:s,payload:c})},S=e=>o=>t=>{var a=p(e,r.YP.removeFromCard,o);t({type:r.CA.REMOVE_FROM_CARD,payload:a})},E=e=>o=>{var{couponIndex:t}=o;return{type:r.CA.SEAMLESS_NAVIGATE_NO_NAVIGATION,payload:{componentName:e.componentName,usageContext:r.YP.addCardToLoad,itemIndex:t+1,dataClassification:r.y7.HPLPI}}},O=e=>({type:r.CA.COUPONS_LIMIT_WARNING,payload:{componentName:e,usageContext:"display alert",alertMessage:i.FM.Coupons.WARNING_TEXT,alertType:"coupons",dataClassification:n.AnalyticsModule.DataClassification.HIGHLY_PRIVATE_LINKED_PERSONAL_INFORMATION}}),v=e=>{var{componentName:o,coupon:t,couponIndex:s,selectedCouponsFilters:i}=e,p=l.yB[c.NE],d=(0,u.o)(i,o),C=void 0===s?void 0:s+1;return{type:r.CA.NO_QUALIFYING_PRODUCTS,payload:(0,a.A)({componentName:o,usageContext:"display alert",alertMessage:p.description,alertType:"qualifying products",itemIndex:C},d,{couponData:{couponBrand:t.brandName,couponCategory:t.categories,couponType:t.title,couponID:t.id,couponDesc:t.shortDescription},dataClassification:n.AnalyticsModule.DataClassification.HIGHLY_PRIVATE_LINKED_PERSONAL_INFORMATION})}},N=function(e,o,t){void 0===t&&(t=!1);var n=r.YP.filterCoupons,s=r.CA.FILTER_COUPONS;return e!==r.w$.MY_CASH_BACK_DEALS&&e!==r.w$.CASH_BACK_DEALS||(n=r.YP.filterCashback,s=r.CA.FILTER_CASHBACK),{type:s,payload:(0,a.A)({componentName:e,usageContext:n,isLocalSearch:t},o)}},g=(e,o)=>{var t={componentName:"coupon dash",usageContext:e,destination:o,to:o,dataClassification:r.y7.HPLPI};return{type:r.CA.SEAMLESS_NAVIGATE_NO_NAVIGATION,payload:t}},y=e=>o=>()=>{o({type:r.CA.SEAMLESS_NAVIGATE_NO_NAVIGATION,payload:{componentName:"coupon details",usageContext:"click here",itemIndex:e+1,dataClassification:r.y7.HPLPI}})},_=(e,o)=>t=>a=>{var n=((e,o,t)=>({componentName:t,shareNetwork:o,usageContext:"share coupon",couponData:{couponBrand:e.brandName,couponCategory:e.categories,couponDesc:e.shortDescription,couponID:e.id,couponLoaded:e.addedToCard,couponNumberOfUses:e.redemptionsAllowed,couponProductsNeeded:e.requirementQuantity,couponSavings:e.value}}))(o,a,e);t({type:r.CA.SOCIAL_SHARE_ICON_CLICK,payload:n})},h=e=>o=>()=>{o({type:r.CA.SEAMLESS_NAVIGATE_NO_NAVIGATION,payload:{componentName:e,usageContext:"share coupon",dataClassification:r.y7.HPLPI}})},T=(e,o)=>t=>{t({type:"seamless/coupons/omniture/SEND_TO_CASHOUT",payload:{componentName:e,payPalBalance:Number(o)||0,flowStepDescription:"cash earned"}})},P=e=>{var{componentName:o,flowStepDescription:t,payPalBalance:a,shoppersCardBalance:n,cashedOutAmount:s}=e;return e=>{e({type:r.CA.CASHOUT_CONFIRM,payload:{componentName:o,flowStepDescription:t,payPalBalance:Number(a)||0,shoppersCardBalance:Number(n)||0,cashedOutAmount:Number(s)||0,usageContext:r.YP.cashoutCompleteFlow}})}},L=e=>{var{componentName:o,payPalBalance:t}=e;return e=>{e({type:r.CA.CASHOUT_START_FLOW,payload:{componentName:o,flowStepDescription:"cash earned",payPalBalance:Number(t)||0,usageContext:r.YP.cashoutStartFlow}})}},I=e=>{var{componentName:o,flowStepDescription:t}=e;return e=>{e({type:r.CA.CASHOUT_CONTINUE_FLOW,payload:{componentName:o,flowStepDescription:t,usageContext:r.YP.cashoutContinueFlow}})}},f=e=>{var{componentName:o,flowStepDescription:t,payPalBalance:a,shoppersCardBalance:n,cashedOutAmount:s}=e;return e=>{e({type:r.CA.CASHOUT_COMPLETE_FLOW,payload:{componentName:o,flowStepDescription:t,payPalBalance:Number(a)||0,shoppersCardBalance:Number(n)||0,cashedOutAmount:Number(s)||0,usageContext:r.YP.cashoutCompleteFlow}})}},D=e=>{var{componentName:o,usageContext:t}=e;return e=>{e({type:r.CA.SEAMLESS_NAVIGATE_NO_NAVIGATION,payload:{componentName:o,usageContext:t,dataClassification:r.y7.HPLPI}})}}},942676:(e,o,t)=>{t.d(o,{Z:()=>s});var a=t(183043),n=t(380736),s=()=>e=>{e((0,n.R)({keySpace:a.iN.keySpace,origin:a.iN.origin}))}},125702:(e,o,t)=>{t.d(o,{A:()=>a});const a={RELEVANCE:{label:"Relevance",value:"relevance",id:"ClassRelevance"},RECENT:{label:"Most Recent",value:"recent",id:"ClassRecent"},EXPIRATION:{label:"Expiration Date",value:"expiration",id:"ClassExpiration"},VALUE:{label:"Value",value:"value",id:"ClassValue"}}},30536:(e,o,t)=>{t.d(o,{$t:()=>d,AG:()=>ke,AV:()=>de,Av:()=>N,B_:()=>P,Br:()=>te,By:()=>f,D0:()=>k,D7:()=>ce,DF:()=>he,DG:()=>Se,F4:()=>s,Fz:()=>H,Gr:()=>V,IS:()=>Y,Iz:()=>A,JN:()=>le,Jm:()=>E,K7:()=>Q,LC:()=>_,LD:()=>ue,Lr:()=>y,M2:()=>K,Mc:()=>fe,Me:()=>Oe,PU:()=>Pe,QQ:()=>w,Qr:()=>W,SM:()=>u,SX:()=>ee,Sv:()=>X,TV:()=>x,Tb:()=>p,Uk:()=>Le,Uo:()=>a,VP:()=>Ie,VV:()=>ve,Y8:()=>J,YC:()=>j,YW:()=>O,Ye:()=>q,Z6:()=>me,ZG:()=>B,_n:()=>h,aU:()=>ye,aY:()=>r,b8:()=>ie,bs:()=>pe,cu:()=>c,dx:()=>S,e:()=>_e,eY:()=>g,fT:()=>Ne,g9:()=>Ee,gW:()=>z,g_:()=>F,hF:()=>n,hI:()=>be,ho:()=>i,hy:()=>ne,kA:()=>G,kg:()=>D,ki:()=>Ce,m6:()=>M,mH:()=>ae,mr:()=>T,mx:()=>L,my:()=>Re,nA:()=>Te,nQ:()=>b,pi:()=>I,q3:()=>ge,qK:()=>De,qo:()=>m,qs:()=>U,sy:()=>$,tE:()=>re,tX:()=>we,ts:()=>Ae,uv:()=>oe,uy:()=>se,vn:()=>v,w1:()=>Ue,yZ:()=>C,yy:()=>R,zK:()=>l,zX:()=>Z});var a="card/CLIP_COUPON_SUCCESS",n="card/CLIP_COUPON_FAILURE",s="card/CLOSE_MODAL",r="card/CLOSE_SHIP_MODAL",i="card/CLIPPING_COUPON_TO_CARD",l="card/OPEN_MODAL",c="card/OPEN_SHIP_MODAL",u="card/REMOVE_COUPON_SUCCESS",p="card/REMOVE_COUPON_FAILURE",d="card/REMOVING_COUPON_FROM_CARD",C="card/CLIPPED_COUPON_ACKNOWLEDGEMENT_MSG",m="seamless/coupons/ALL_COUPONS_TAB_SELECTED",A="seamless/coupons/CLIPPED_COUPONS_TAB_SELECTED",S="card/OPEN_REFINE_BY_MODAL",E="card/CLOSE_REFINE_BY_MODAL",O="seamless/coupons/CHANGE_COUPONS_SORTING",v="seamless/coupons/SET_NEW_COUPONS_FILTER",N="seamless/coupons/TOGGLE_CLICKLIST_OFFERS",g="seamless/coupons/RESET_TOGGLE_CLICKLIST_OFFERS",y="seamless/coupons/RESET_SORT",_="seamless/coupons/OPEN_PRINT_MODAL",h="seamless/coupons/REQUEST_PRINT_COUPONS_SUCCESS",T="seamless/coupons/REQUEST_PRINT_COUPONS_FAILED",P="seamless/coupons/CLOSE_PRINT_MODAL",L="seamless/coupons/CLIPPED_COUPONS_TYPE_CHANGED",I="seamless/coupons/SET_COUPONS",f="seamless/coupons/CLIPPED_COUPONS_TYPE_RESET",D="seamless/coupons/REQUEST_COUPONS_SUCCESS",b="seamless/coupons/FILTER_COUPONS",R="seamless/coupons/TAB_SELECTED",U="seamless/coupons/REMOVE_COUPON_FROM_CLIPPED_COUPONS",k="seamless/coupons/CLEAR_COUPONS_CATEGORIES_FILTERS",w="seamless/coupons/CLEAR_ALL_COUPONS_SPECIAL_SAVINGS_FILTERS",x="seamless/coupons/CLEAR_COUPONS_BRANDS_FILTERS",M="seamless/coupons/CLEAR_COUPONS_MODALITY_FILTERS",H="seamless/coupons/CLEAR_ALL_FILTERS",B="seamless/coupons/COUPON_FILTERS_SELECTED",F="seamless/coupons/COUPON_FILTER_FACET_SELECTED",G="seamless/coupons/REQUEST_COUPONS",K="seamless/coupons/REQUEST_CLIPPED_COUNT_SUCCESS",V="seamless/coupons/REQUEST_COUPONS_FAILED",Y="seamless/coupons/REQUEST_CLIPPED_COUNT_FAILED",j="seamless/coupons/REQUEST_CLIPPED_COUNT",W="seamless/coupons/RESET_COUPONS",Q="seamless/coupons/RESET_AMP_GRID",z="seamless/coupons/REQUEST_REDEEMED_COUPONS",q="seamless/coupons/REQUEST_REDEEMED_COUPONS_FOR_COUNT",X="seamless/coupons/REQUEST_REDEEMED_COUPONS_FOR_COUNT_SUCCESS",J="seamless/coupons/REQUEST_REDEEMED_COUPONS_FOR_COUNT_FAILED",Z="seamless/coupons/REQUEST_CLIPPEDCOUPONS",$="seamless/coupons/filters/REQUEST_FILTERS",ee="seamless/coupons/filters/REQUEST_CLIPPED_COUPONS_FILTERS",oe="seamless/coupons/filters/REQUEST_FILTERS_SUCCESS",te="seamless/coupons/filters/REQUEST_FILTER_FAILED",ae="seamless/coupons/REQUEST_REDEEMED_COUPONS_FILTERS",ne="seamless/coupons/UPDATE_FILTERS_COUNT",se="seamless/coupons/card/REQUEST_QUALIFYING_PRODUCTS_FETCH_SUCCESS",re="seamless/coupons/card/REQUEST_QUALIFYING_PRODUCTS_FETCH_ERROR",ie="seamless/coupons/card/REQUEST_QUALIFYING_PRODUCTS",le="seamless/coupons/REQUEST_COUPON_DETAIL",ce="seamless/coupons/REQUEST_COUPON_META_DETAIL",ue="seamless/coupons/COUPON_DETAIL_SUCCESS",pe="seamless/coupons/COUPON_META_DETAIL_SUCCESS",de="seamless/coupons/COUPON_DETAIL_FAILURE",Ce="seamless/coupons/COUPON_META_DETAIL_FAILURE",me="seamless/coupons/RESET_COUPON_DETAIL",Ae="seamless/coupons/REQUEST_BRANDS_SUCCESS",Se="seamless/coupons/TOGGLE_MY_COUPON_FILTERS",Ee="seamless/coupons/TOGGLE_ALL_COUPON_FILTERS",Oe="seamless/coupons/TOGGLE_BY_DEPARTMENT_FILTERS",ve="seamless/coupons/TOGGLE_ALL_CASHBACKS_FILTERS",Ne="seamless/coupons/TOGGLE_LOADED_CASHBACKS_FILTERS",ge="seamless/coupons/RESET_FILTER_TOGGLE_TO_DEFAULT",ye="seamless/coupons/REQUEST_ANNUAL_SAVINGS",_e="seamless/coupons/REQUEST_ANNUAL_SAVINGS_SUCCESS",he="seamless/coupons/REQUEST_ANNUAL_SAVINGS_FAILURE",Te="seamless/coupons/REQUEST_SAVINGS_INFO",Pe="seamless/coupons/REQUEST_SAVINGS_INFO_SUCCESS",Le="seamless/coupons/REQUEST_SAVINGS_INFO_FAILURE",Ie="seamless/coupons/APPLY_FILTERS",fe="seamless/coupons/CLEAR_FILTERS",De="seamless/coupons/SET_SEARCH_STRING",be="seamless/coupons/CLEAR_SEARCH_STRING",Re="seamless/coupons/UPDATE_COUPONS_SAVINGS",Ue="seamless/coupons/REQUEST_SHOPPERS_CARD_CASH",ke="seamless/coupons/UPDATE_SHOPPERS_CARD_CASH_SUCCESS",we="seamless/coupons/UPDATE_SHOPPERS_CARD_CASH_FAILURE"},183043:(e,o,t)=>{t.d(o,{Ax:()=>ae,B1:()=>B,Bi:()=>ee,Bw:()=>U,Cy:()=>L,Hx:()=>I,Jw:()=>v,KB:()=>_,LT:()=>y,M1:()=>te,MG:()=>f,NE:()=>h,OT:()=>Y,P$:()=>O,QW:()=>D,QY:()=>l,RF:()=>m,Sd:()=>q,Tg:()=>p,UK:()=>s,VD:()=>b,Wl:()=>J,YW:()=>u,_H:()=>C,_O:()=>n,cF:()=>X,cX:()=>k,cl:()=>G,e6:()=>Q,ei:()=>w,em:()=>x,g0:()=>g,h1:()=>H,hP:()=>Z,iN:()=>$,kV:()=>i,m_:()=>S,pg:()=>d,pq:()=>W,ri:()=>A,si:()=>c,tt:()=>oe,uB:()=>j,uR:()=>T,vf:()=>r,wn:()=>F,xH:()=>E,xT:()=>R,xg:()=>z,yQ:()=>N,yR:()=>M,yb:()=>P});var a=t(167810),n=180,s="brand",r="category",i="specialSavings",l="modalities",c="Clear Selected",u="Clear All Filters",p="selectedBrands",d="selectedCategories",C="selectedModalities",m="newCouponsChecked",A="showClickListOffers",S="selectedSpecialSavings",E=200,O=6e3,v=72,N=24,g=0,y="loading",_="loaded",h="noProducts",T="noProducts_cashback",P="fetchError",L="storeNotSelected",I="shipModalitySelected",f="TooManyCouponsOnCard",D="getQualifyingProducts",b="getCouponDetails",R="getCouponMetaDetails",U="printInfo",k="getRedeemedCoupons",w="4XGCEVENT",x="https://giftcards.kroger.com/?icid=kpfgift_coupon-romance_gift-card-4x",M={PAYPAL:"PAYPAL",SHOPPER_CARD:"SHOPPER_CARD"},H={FORBIDDEN:403},B={GET:"GET",POST:"POST",DELETE:"DELETE"},F={BY_DEPARTMENT:"BY_DEPARTMENT",CLIPPED_COUPONS:"CLIPPED_COUPONS",ALL_COUPONS:"ALL_COUPONS",ALL_CASHBACK:"ALL_CASHBACK",LOADED_CASHBACK:"LOADED_CASHBACK",COUPON_DETAILS_PAGE:"COUPON_DETAILS_PAGE",COUPON_DETAILS_PAGE_URL:"/c/",SAVINGSCENTER_COUPON_DETAILS_PAGE_URL:"/savings/c/",SAVINGS_INFO_URL:"/savingsinfo",SAVINGS_INFO_PAGE:"SAVINGS_INFO_PAGE",SAVINGS_OVERVIEW:"SAVINGS_OVERVIEW",SAVINGS_OVERVIEW_URL:"/savingsoverview/",WEEKLYAD:"WEEKLYAD",WEEKLYAD_URL:"/weeklyad/",SAVINGS_CENTER_WEEKLYAD_URL:"/savings/weeklyad/",SAVINGS_CENTER_URL:"/savings",SAVINGSCENTER_ALL_COUPONS:"SAVINGSCENTER_ALL_COUPONS",SAVINGSCENTER_ALL_COUPONS_URL:"/savings/cl/coupons/",SAVINGSCENTER_BY_DEPARTMENT_URL:"/savings/cl/coupons/department/",SAVINGSCENTER_CLIPPED_COUPONS_URL:"/savings/cl/mycoupons/",SAVINGSCENTER_ALL_CASHBACK_URL:"/savings/cbk/cashback/",SAVINGSCENTER_LOADED_CASHBACK_URL:"/savings/cbk/mycashback/",SAVINGSCENTER_CASHBACK_EDUCATION_URL:"/savingsoverview/cashback-info/?comingFrom=/savings",SAVINGSCENTER_COUPONS_EDUCATION_URL:"/savingsoverview/coupons-info/?comingFrom=/savings",SAVINGSCENTER_WEEKLYAD_EDUCATION_URL:"/savingsoverview/weekly-ad-info/?comingFrom=/savings"},G={ACTIVE:"active",REDEEMED:"redeemed"},K="/atlas/v1/savings-coupons/v1",V=K+"/coupons",Y={PRINT_CLIPPED_COUPONS:""+K+"/coupons?filter.status=active",REDEEMED_COUPONS:V+"?filter.status=redeemed",REDEEMED_COUPONS_CATALOGUE:V+"?filter.status=redeemed",REDEEMED_COUPONS_FILTERS:K+"/coupons"+"?filter.status=redeemed",ALL_COUPONS_CATALOGUE:""+V,CASHBACKS_CATALOGUE:V+"?filter.status=unclipped&filter.status=active",COUPONS_CATALOGUE:V+"?filter.status=unclipped&filter.status=active",CLIPPED_COUPONS_CATALOGUE:V+"?filter.status=active",LOADED_CASHBACK_CATALOGUE:V+"?filter.status=active",CLIPPED_COUPONS:V+"?filter.status=active",ALL_COUPONS:""+V},j={NEW_COUPONS:"newcoupons"},W="relevance",Q={[F.CLIPPED_COUPONS]:Y.CLIPPED_COUPONS_CATALOGUE,[F.ALL_COUPONS]:Y.COUPONS_CATALOGUE,[F.ALL_CASHBACK]:Y.CASHBACKS_CATALOGUE,[F.LOADED_CASHBACK]:Y.LOADED_CASHBACK_CATALOGUE},z={[F.CLIPPED_COUPONS]:Y.CLIPPED_COUPONS,[F.ALL_COUPONS]:V,[F.ALL_CASHBACK]:V,[F.LOADED_CASHBACK]:Y.CLIPPED_COUPONS},q={ERROR:"ERROR",JAVASCRIPT_ERROR:"JAVASCRIPT_ERROR",NOT_FOUND:"NOT_FOUND",CLIENT_ERROR:"CLIENT_ERROR",SERVICE_ERROR:"SERVICE_ERROR",NETWORK_ERROR:"NETWORK_ERROR"},X={STANDARD:"STANDARD",CASH_BACK:"CASH_BACK"},J={CLIP:"CLIP",UNCLIP:"UNCLIP"},Z={keySpace:"cashback"},$={keySpace:a.jt,origin:{page:"savings",component:"savings"}},ee="savings center coupons",oe="savings center cashback",te="savings center",ae={WEEKLY_ADS:"WEEKLY_ADS",STANDARD:"STANDARD",CASH_BACK:"CASH_BACK"}},616962:(e,o,t)=>{t.d(o,{K9:()=>l,VA:()=>m,YW:()=>s,d:()=>i,e0:()=>p,fZ:()=>u,iv:()=>a,q2:()=>d,q5:()=>C,rJ:()=>c,w6:()=>n,wh:()=>r});var a="SIGN_IN",n="ADD_CARD_TO_LOAD",s="LOAD_TO_CARD",r="LOADING_TO_CARD",i="REMOVE_FROM_CARD",l="REMOVING_FROM_CARD",c="MAX_COUPON_LIMIT_REACHED",u="COUPON_EXPIRED",p="COUPON_DISABLED",d="MEMBERSHIP_EXCLUSIVE_SIGN_IN",C="MEMBERSHIP_EXCLUSIVE_CDP_SIGN_IN",m="MEMBERSHIP_EXCLUSIVE_SIGN_IN_COMPACT_INVERSE"},455902:(e,o,t)=>{t.d(o,{mX:()=>n,yB:()=>s});var a=t(183043),n="We're sorry. There are no coupons that match the filters or search you selected. Try another set of filters or a different search term to broaden your search.",s={[a.yb]:{description:"We're experiencing a minor technical issue, but we're already working to solve it. Please try again shortly.",title:"Oops!"},[a.NE]:{description:"There are no applicable items for this coupon."},[a.uR]:{description:"There are currently no items associated with this deal."},[a.Cy]:{description:"Select your preferred store to view and shop items on sale.",title:"Let's Pick a Store to Shop!"},[a.Hx]:{description:"Please select pick-up, in-store or delivery.",title:"Uh oh! Ship problems again"}}},369465:(e,o,t)=>{t.d(o,{Ai:()=>O,CY:()=>_,FM:()=>v,I8:()=>r,MG:()=>l,W5:()=>c,dN:()=>C,fZ:()=>m,hv:()=>y,jB:()=>i,jf:()=>S,pz:()=>g,q5:()=>h,xQ:()=>N});var a=t(296540),n=t(678537),s=t(282971),r="Coupon couldn't be loaded.",i="Coupon couldn't be removed.",l="TooManyCouponsOnCard",c="CouponAlreadyAdded",u="CouponNotAvailable",p="InternalServerError",d="CantLoadCoupon",C="CantUnloadCoupon",m="CouponExpired",A="Unable to clip this offer.",S={[c]:"Coupon already clipped.",[u]:"Sorry, this coupon is no longer available.",[C]:"Unable to unclip this offer.",[l]:"Maximum number of offers clipped.",[d]:A,[p]:A,[m]:"Coupon Expired"},E="Unable to get Cash Back at this time.",O={[c]:"Deal already loaded.",[u]:"Sorry, this deal is no longer available.",[C]:"Sorry, we're unable to remove this deal.",[l]:"Maximum number of offers clipped.",[d]:E,[p]:E,[m]:"Deal Expired"},v={Coupons:{WARNING:'You are approaching the maximum number of offers loaded to your card. To remove any unused offers,\n click on <a href="/savings/cl/mycoupons/"> Clipped Coupons</a>.',WARNING_TEXT:"You are approaching the maximum number of offers loaded to your card. To remove any unused offers, click on Clipped Coupons.",ERROR:'You have reached the maximum number of offers loaded to your card. To remove any unused offers,\n click on <a href="/savings/cl/mycoupons/"> Clipped Coupons</a>.',ERROR_TEXT:"You have reached the maximum number of offers loaded to your card. To remove any unused offers, click on Clipped Coupons."}},N={unique:!0,body:""+v.Coupons.ERROR,kind:"subtle",palette:"negative",variant:"fill",icon:a.createElement(n.c,{"aria-hidden":"true"}),role:"alert"},g={unique:!0,body:""+v.Coupons.WARNING,kind:"subtle",palette:"callout",variant:"fill",icon:a.createElement(s.i,{"aria-hidden":"true"}),role:"alert"},y={CASH_BACK:E,STANDARD:A},_={CASH_BACK:"Unable to remove Deal at this time.",STANDARD:"Unable to unclip this offer."},h={CASH_BACK:"Deal expired",STANDARD:"Coupon Expired"}},556475:(e,o,t)=>{t.d(o,{Bw:()=>u,CA:()=>n,YP:()=>i,fR:()=>p,gA:()=>r,gr:()=>A,ob:()=>d,w$:()=>l,y7:()=>s});var a=t(183043),n={SORT_SELECTED:"seamless/coupons/omniture/SORT_SELECTED",LOAD_MORE:"seamless/coupons/omniture/LOAD_MORE",CLICK_MORE:"seamless/coupons/omniture/CLICK_MORE",CLICK_MORE_SEARCH:"seamless/coupons/omniture/CLICK_MORE_SEARCH",SIGN_IN_TO_LOAD:"seamless/coupons/omniture/SIGN_IN",ADD_TO_CARD:"seamless/coupons/omniture/ADD_TO_CARD",ADD_TO_CARD_ERROR:"seamless/coupons/omniture/ADD_TO_CARD_FAILURE",REMOVE_FROM_CARD:"seamless/coupons/omniture/REMOVE_FROM_CARD",REMOVE_FROM_CARD_ERROR:"seamless/coupons/omniture/REMOVE_FROM_CARD_FAILURE",ADD_CARD_TO_LOAD:"seamless/coupons/omniture/ADD_CARD_TO_LOAD",FILTER_COUPONS:"seamless/search/OMNITURE_FILTER_ITEMS",COUPONS_LIMIT_WARNING:"seamless/coupons/omniture/COUPONS_LIMIT_WARNING",COUPONS_ERROR:"seamless/coupons/omniture/COUPONS_ERROR",DASHBOARD_CLICK:"seamless/coupons/omniture/COUPONS_DASHBOARD",OMNITURE_FILTER_TOGGLE:"seamless/coupons/omniture/FILTER_TOGGLE",NO_QUALIFYING_PRODUCTS:"seamless/coupons/omniture/NO_QUALIFYING_PRODUCTS",SOCIAL_SHARE_ICON_CLICK:"seamless/coupons/omniture/SOCIAL_SHARE_ICON_CLICK",SIGN_IN_START:"seamless/coupons/omniture/SIGN_IN_START",CASH_BACK_LOAD_TO_CARD:"seamless/coupons/omniture/CASH_BACK_LOAD_TO_CARD",VIEW_CASHBACK_DEAL:"seamless/coupons/omniture/VIEW_CASHBACK_DEAL",FILTER_CASHBACK:"seamless/search/OMNITURE_FILTER_ITEMS",CASHOUT_CONFIRM:"seamless/coupons/omniture/CASHOUT_CONFIRM",CASHOUT_START_FLOW:"seamless/coupons/omniture/CASHOUT_START_FLOW",CASHOUT_CONTINUE_FLOW:"seamless/coupons/omniture/CASHOUT_CONTINUE_FLOW",CASHOUT_COMPLETE_FLOW:"seamless/coupons/omniture/CASHOUT_COMPLETE_FLOW",CASHOUT_START_NAVIGATE:"seamless/coupons/omniture/CASHOUT_START_NAVIGATE",STREAK_COMPLETE_START_NAVIGATE:"seamless/coupons/omniture/STREAK_COMPLETE_START_NAVIGATE",SEAMLESS_NAVIGATE:"SEAMLESS_NAVIGATE",SEAMLESS_NAVIGATE_NO_NAVIGATION:"SEAMLESS_NAVIGATE_NO_NAVIGATION"},s={API:"Anonymized Personal Information",HPEPI:"Highly Private Embedded Personal Information",HPLPI:"Highly Private Linked Personal Information",PHI:"Protected Health Information"},r={relevance:"relevance",recent:"most recent",expiration:"expiration date",value:"value"},i={loadMoreCoupons:"load more coupons",viewCoupon:"view coupon",signInToLoad:"sign in",addToCard:"load coupon",removeFromCard:"remove coupon",addCardToLoad:"add shoppers card",filterCoupons:"filter coupons",logError:"log error",showFilters:"show filters",hideFilters:"hide filters",shareCoupon:"share coupon",signInStart:"sign in",cashOut:"cash out",loadCashBackDeal:"load cash back deal",viewCashBackDeal:"view cash back deal",filterCashback:"filter cash back",loadMoreCashbackDeals:"load more cash back deals",cashoutStartFlow:"start flow",cashoutContinueFlow:"continue flow",cashoutCompleteFlow:"complete flow"},l={COUPON_DETAIL:"coupon details",COUPON_DETAILS_PAGE:"coupon details page",CASHBACK:"cashback",CASH_BACK_DEALS:"cashback deals",MY_CASH_BACK_DEALS:"my cashback deals",CASH_BACK_DEAL_DETAILS:"cashback deals details",CASHOUT_PAYPAL:"cash out paypal",CASHOUT_SHOPPERS_CARD:"cash out shoppers card",ALL_COUPONS:"coupons",COUPON_SEARCH_FILTER:"coupons search filter",COUPONS_BY_DEPARTMENT:"by department"},c={[a.wn.CLIPPED_COUPONS]:"clipped coupons",[a.wn.BY_DEPARTMENT]:"by department",[a.wn.ALL_COUPONS]:"coupons",[a.wn.ALL_CASHBACK]:"cashback deals",[a.wn.LOADED_CASHBACK]:"my cashback deals"},u={[a.wn.CLIPPED_COUPONS]:"clipped coupons",[a.wn.BY_DEPARTMENT]:"by department",[a.wn.ALL_COUPONS]:"all coupons",[a.wn.ALL_CASHBACK]:"all deals",[a.wn.LOADED_CASHBACK]:"loaded deals"},p=e=>c[e],d="coupons",C="all coupons",m="clipped coupons",A={printModal:{[a.wn.BY_DEPARTMENT]:{componentName:c[a.wn.BY_DEPARTMENT]},[a.wn.CLIPPED_COUPONS]:{componentName:m},[a.wn.ALL_COUPONS]:{componentName:C}},loadMore:{[a.wn.CLIPPED_COUPONS]:{componentName:m},[a.wn.ALL_COUPONS]:{componentName:C}}}},405173:(e,o,t)=>{t.d(o,{Ay:()=>a,u0:()=>n});const a={TAB_HEADER_UNCLIPPED_COUNT:"tabHeaderUnClippedCount",TAB_HEADER_CLIPPED_COUNT:"tabHeaderClippedCount",CLIPPED_COUPON_COUNT:"clippedCouponCount",CLIPPED_COUPONS:"clippedCoupons",LOADING_KEY:"loading",LOADING_REASON_KEY:"loadingReason",COUPON_STATUS:"status",COUPON_LIST:"couponList",COUPONS_NUMBER:"couponsNumber",COUPONS_GRID:"couponsGrid",DISPLAYED_COUPONS:"displayedCoupons",COUPONS_FETCH_ERROR:"couponsFetchError",CLIPPED_COUPONS_FETCH_ERROR:"clippedCouponsFetchError",REDEEMED_COUPONS_FETCH_ERROR:"redeemedCouponsFetchError",DISPLAYED_COUPON_COUNT:"displayedCount",COUPON_COUNT:"couponCount",REDEEMED_COUPONS:"redeemedCoupons",TOTAL_COUPON_COUNT:"totalCount",CLIPPED_COUPONS_FETCHED_FLAG:"isClippedCouponsCountFetched",CLIPPED_COUPONS_CONTEXT:"CLIPPED_COUPONS",LOADED_CASHBACK_CONTEXT:"LOADED_CASHBACK",RECENTLY_CLIPPED_COUPONS:"recentlyClippedCoupons",MAX_CLIPPED_COUPONS_LIMIT_REACHED:"maxClippedCouponsLimitReached",NOT_LOADED:"NOT_LOADED",LOADED:"LOADED",LOADING:"LOADING",COUPON_EXPIRED:"couponExpired",GRID_ID_DELIMITER:"---"};var n={FILTERING:"filtering",CLEARING:"clearing",FETCHING:"fetching",DONE:"done"}},60983:(e,o,t)=>{t.d(o,{A:()=>le});var a=t(30536),n={couponId:null,couponContext:null,isOpen:!1};var s={couponNumber:null,couponContext:null,isOpen:!1,isOpenedOnce:!1};var r=t(58168),i=t(183043),l={[i.QW]:{upcs:[],status:i.LT,type:"",payload:{keySpace:"",upcs:[]}}};var c={[i.UK]:i.Tg,[i.vf]:i.pg,[i.kV]:i.m_,[i.QY]:i._H},u=function(e){return e.CLIP="CLIP",e.REMOVE="REMOVE",e}({}),p={[i.Tg]:[],[i.pg]:[],[i.m_]:[],[i._H]:[],[i.RF]:!1,[i.ri]:!0},d=e=>(0,r.A)({},e,{[i.pg]:[],[i.Tg]:[],[i._H]:[]}),C=e=>e.map((e=>e.toLowerCase())),m={[a.g_]:(e,o)=>{var{selectedItems:t=[],type:a}=o.payload||{};if(!a)return e;var n=c[a];return n?(0,r.A)({},e,{[n]:C(t)}):e},[a.ZG]:(e,o)=>{var{brands:t,categories:a,specialSavings:n,modalities:s,newCoupons:l}=o.payload,c=[...e[i.Tg],...C(t)],u=[...e[i.pg],...C(a)],p=[...e[i.m_],...C(n)],d=[...e[i._H],...C(s)];return(0,r.A)({},e,{[i.Tg]:[...c],[i.pg]:[...u],[i.m_]:[...p],[i._H]:[...d],[i.RF]:l})},[a.vn]:(e,o)=>(0,r.A)({},e,{[i.RF]:o.payload.checked}),[a.Av]:e=>(0,r.A)({},e,{[i.ri]:!e[i.ri]}),[a.eY]:e=>(0,r.A)({},e,{[i.ri]:!0}),[a.TV]:e=>(0,r.A)({},e,{[i.Tg]:[]}),[a.m6]:e=>(0,r.A)({},e,{[i._H]:[]}),[a.D0]:e=>(0,r.A)({},e,{[i.pg]:[]}),[a.QQ]:e=>(0,r.A)({},e,{[i.m_]:[]}),[a.Fz]:()=>p,[a.qo]:d,[a.Iz]:d,[a.mx]:d,default:()=>p};var A={isCouponRefineByModalOpen:!1};var S=t(125702),E="selectedSortType",O={selectedSortType:S.A.RELEVANCE.value};var v="isPrintModalOpen",N="printMyCouponData",g="printCouponRequestFailed",y="isLoading",_={[v]:!1,[N]:{printData:[]},[g]:!1,[y]:!1};const h=function(e,o){switch(void 0===e&&(e=_),o.type){case a.LC:return(0,r.A)({},e,{[v]:!0,[y]:!0});case a._n:return(0,r.A)({},e,{[N]:o.payload,[y]:!1});case a.mr:return(0,r.A)({},e,{[g]:!0,[y]:!1});case a.B_:return(0,r.A)({},e,{[N]:_[N],[v]:!1,[g]:!1});default:return e}};var T="selectedClippedCouponsType",P={[T]:i.cl.ACTIVE};var L=t(405173),I={[L.Ay.DISPLAYED_COUPON_COUNT]:0,[L.Ay.TOTAL_COUPON_COUNT]:0};var f=t(962193),D=t.n(f),b={[a.ho]:()=>({couponLoading:!0,error:!1,showCouponsSuccessMessage:!1}),[a.Uo]:()=>({couponLoading:!1,showCouponsSuccessMessage:!0,addedToCard:!0,error:!1}),[a.hF]:function(e){return void 0===e&&(e={}),(0,r.A)({couponLoading:!1,addedToCard:!1,showCouponsSuccessMessage:!1,error:!0},e)},[a.$t]:()=>({couponRemoving:!0,showCouponsSuccessMessage:!1}),[a.SM]:()=>({couponRemoving:!1,addedToCard:!1,error:!1,showCouponsSuccessMessage:!1}),[a.Tb]:function(e){return void 0===e&&(e={}),(0,r.A)({couponRemoving:!1,addedToCard:!0,error:!0},e)}};const R=function(e,o){return void 0===o&&(o={}),b[e]?b[e](o):{}};var U={loading:!1,loaded:!1,error:!1,couponDetails:{}};var k=t(935880),w=t.n(k),x={[L.Ay.COUPON_LIST]:{},[L.Ay.COUPONS_NUMBER]:{},[L.Ay.DISPLAYED_COUPONS]:[],[L.Ay.COUPON_STATUS]:{[L.Ay.LOADING_KEY]:!0,[L.Ay.LOADING_REASON_KEY]:L.u0.FETCHING,[L.Ay.MAX_CLIPPED_COUPONS_LIMIT_REACHED]:!1},[L.Ay.COUPONS_GRID]:{},[L.Ay.CLIPPED_COUPONS]:{[L.Ay.CLIPPED_COUPON_COUNT]:0},[L.Ay.REDEEMED_COUPONS]:{[L.Ay.COUPON_COUNT]:0},[L.Ay.CLIPPED_COUPONS_FETCHED_FLAG]:!1,[L.Ay.RECENTLY_CLIPPED_COUPONS]:[]},M=(e,o,t)=>{var a=e[L.Ay.COUPON_LIST],n=Object.assign({},a[t],o),s=Object.assign({},a,{[t]:n});return(0,r.A)({},e,{[L.Ay.COUPON_LIST]:s})},H=(e,o)=>{var t=e[L.Ay.COUPON_LIST],a=Object.keys(t).reduce(((e,a)=>{var n;return e[a]=(null==(n=t[a])?void 0:n.subStatusCode)&&n.subStatusCode===i.MG||null!=n&&n.maxCouponLimitReached?Object.assign({},n,o):n,e}),{});return(0,r.A)({},e,{[L.Ay.COUPON_LIST]:a})},B=e=>(0,r.A)({},e,{[L.Ay.COUPON_LIST]:{},[L.Ay.COUPONS_NUMBER]:{},[L.Ay.DISPLAYED_COUPONS]:[],[L.Ay.COUPONS_FETCH_ERROR]:!1}),F=e=>(0,r.A)({},e,{[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.LOADING_KEY]:!0})}),G={[a.kA]:e=>(0,r.A)({},e,{[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.LOADING_KEY]:!0,[L.Ay.LOADING_REASON_KEY]:L.u0.FETCHING})}),[a.nQ]:e=>(0,r.A)({},B(e),{[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.LOADING_KEY]:!0})}),[a.Mc]:e=>(0,r.A)({},e,{[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.LOADING_REASON_KEY]:L.u0.CLEARING})}),[a.VP]:e=>(0,r.A)({},e,{[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.LOADING_REASON_KEY]:L.u0.FILTERING})}),[a.kg]:(e,o)=>{var{couponData:t}=o.payload,{coupons:a,couponsNumber:n,couponContext:s}=t,i=(0,r.A)({},e[L.Ay.COUPON_LIST],a),l=Object.values(e[L.Ay.COUPONS_NUMBER]).filter((e=>Array.isArray(e))).flat().reduce(((e,o)=>(e.set(o.couponNumber,o),o.couponId&&e.set(o.couponId,o),e)),new Map),c=new Map((e[L.Ay.COUPONS_NUMBER][s]||[]).map((e=>["object"==typeof e?e.couponNumber:e,e])));n.forEach((e=>{var o=a[e]||{},t=o.flexRetailerCouponId||null,n="active"===o.status,s=t?l.get(t):null,r=null==s?void 0:s.clipped;t&&(n?s&&(s.hidden=!0):r&&(o.hidden=!0)),c.set(e,{couponNumber:e,couponId:o.id||null,flexRetailerCouponId:t,hidden:o.hidden||!1,clipped:"active"===o.status})}));var u={[s]:Array.from(c.values())},p=(0,r.A)({},e[L.Ay.COUPONS_NUMBER],u);return(0,r.A)({},e,{[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.LOADING_KEY]:!1,[L.Ay.LOADING_REASON_KEY]:L.u0.DONE}),[L.Ay.COUPON_LIST]:i,[L.Ay.COUPONS_NUMBER]:p,[L.Ay.DISPLAYED_COUPONS]:w()(i).map((e=>e.id)),[L.Ay.COUPONS_FETCH_ERROR]:!1})},[a.Gr]:e=>(0,r.A)({},e,{[L.Ay.COUPONS_FETCH_ERROR]:!0,[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.LOADING_KEY]:!1})}),[a.YC]:e=>(0,r.A)({},e,{[L.Ay.CLIPPED_COUPONS]:(0,r.A)({},e[L.Ay.CLIPPED_COUPONS],{[L.Ay.LOADING_KEY]:!0})}),[a.M2]:(e,o)=>{var{payload:t}=o,a=t.clippedCount>=i.xH;return(0,r.A)({},e,{[L.Ay.CLIPPED_COUPONS]:{[L.Ay.LOADING_KEY]:!1,[L.Ay.CLIPPED_COUPON_COUNT]:t.clippedCount},[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.MAX_CLIPPED_COUPONS_LIMIT_REACHED]:a}),[L.Ay.CLIPPED_COUPONS_FETCHED_FLAG]:!0})},[a.IS]:e=>(0,r.A)({},e,{[L.Ay.CLIPPED_COUPONS]:{[L.Ay.LOADING_KEY]:!1,[L.Ay.CLIPPED_COUPONS_FETCH_ERROR]:!0,[L.Ay.CLIPPED_COUPON_COUNT]:0},[L.Ay.CLIPPED_COUPONS_FETCHED_FLAG]:!1}),[a.Ye]:e=>(0,r.A)({},e,{[L.Ay.REDEEMED_COUPONS]:{[L.Ay.LOADING_KEY]:!0}}),[a.Sv]:(e,o)=>{var{payload:t}=o;return(0,r.A)({},e,{[L.Ay.REDEEMED_COUPONS]:{[L.Ay.LOADING_KEY]:!1,[L.Ay.COUPON_COUNT]:t.count}})},[a.Y8]:e=>(0,r.A)({},e,{[L.Ay.REDEEMED_COUPONS]:{[L.Ay.LOADING_KEY]:!1,[L.Ay.REDEEMED_COUPONS_FETCH_ERROR]:!0,[L.Ay.COUPON_COUNT]:0}}),[a.zX]:F,[a.Qr]:e=>B(e),[a.K7]:(e,o)=>{var{couponContext:t}=o,a=(0,r.A)({},e[L.Ay.COUPONS_NUMBER],{[t]:[]}),n=(0,r.A)({},e[L.Ay.COUPONS_GRID],{[t]:{[L.Ay.COUPONS_NUMBER]:[],[L.Ay.COUPONS_FETCH_ERROR]:!1,[L.Ay.COUPON_STATUS]:{[L.Ay.LOADING_KEY]:!0,[L.Ay.LOADING_REASON_KEY]:L.u0.FETCHING}}});return(0,r.A)({},e,{[L.Ay.COUPONS_NUMBER]:a,[L.Ay.COUPONS_GRID]:n})},[a.qs]:(e,o)=>{var t=e[L.Ay.COUPON_LIST],a=((e,o)=>{var t=e[L.Ay.CLIPPED_COUPONS_CONTEXT],a=e[L.Ay.LOADED_CASHBACK_CONTEXT],n=null==t?void 0:t.filter((e=>{var{couponNumber:t}=e;return t!==o})),s=null==a?void 0:a.filter((e=>{var{couponNumber:t}=e;return t!==o}));return(0,r.A)({},e,{[L.Ay.CLIPPED_COUPONS_CONTEXT]:n,[L.Ay.LOADED_CASHBACK_CONTEXT]:s})})(e[L.Ay.COUPONS_NUMBER],o.payload.coupon.krogerCouponNumber),n=(a[L.Ay.CLIPPED_COUPONS_CONTEXT]?a[L.Ay.CLIPPED_COUPONS_CONTEXT]:a[L.Ay.LOADED_CASHBACK_CONTEXT]).map((e=>{var{couponNumber:o}=e;return t[o].id}));return(0,r.A)({},e,{[L.Ay.COUPONS_NUMBER]:a,[L.Ay.DISPLAYED_COUPONS]:n})},[a.yZ]:(e,o)=>M(e,{showCouponsSuccessMessage:!1},o.krogerCouponNumber),[a.ho]:(e,o)=>{var t=R(a.ho);return M(e,t,o.krogerCouponNumber)},[a.Uo]:(e,o)=>{var t=R(a.Uo),n=e[L.Ay.COUPON_LIST];n[o.krogerCouponNumber]||(n[o.krogerCouponNumber]=o.coupon,e=(0,r.A)({},e,{[L.Ay.COUPON_LIST]:n}));var s=e,l=e[L.Ay.CLIPPED_COUPONS][L.Ay.CLIPPED_COUPON_COUNT]+1;if(l===i.xH){var c=(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.MAX_CLIPPED_COUPONS_LIMIT_REACHED]:!0});s=(0,r.A)({},e,{[L.Ay.COUPON_STATUS]:c})}var u=(0,r.A)({},e[L.Ay.COUPONS_NUMBER]),p=Object.values(u).filter((e=>Array.isArray(e))).flat().reduce(((e,o)=>(e.set(o.couponNumber,o),o.couponId&&e.set(o.couponId,o),e)),new Map);Object.entries(u).forEach((e=>{var[t,a]=e;if(Array.isArray(a)){var n=new Map(a.map((e=>[e.couponNumber,e])));if(n.has(o.krogerCouponNumber)){var s=n.get(o.krogerCouponNumber);s.hidden=!1,s.clipped=!0,n.set(o.krogerCouponNumber,s);var r=p.get(null==s?void 0:s.flexRetailerCouponId);r&&(r.hidden=!0)}u[t]=Array.from(n.values())}}));var d=M(s,t,o.krogerCouponNumber),C=[...e[L.Ay.RECENTLY_CLIPPED_COUPONS],o.coupon.krogerCouponNumber];return(0,r.A)({},d,{[L.Ay.CLIPPED_COUPONS]:{[L.Ay.CLIPPED_COUPON_COUNT]:l},[L.Ay.COUPONS_NUMBER]:u,[L.Ay.RECENTLY_CLIPPED_COUPONS]:C})},[a.hF]:(e,o)=>{var t=R(a.hF,{subStatusCode:o.subStatusCode,maxCouponLimitReached:o.maxCouponLimitReached,couponExpired:o.couponExpired}),n=e;if(o.subStatusCode===i.MG){var s=(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.MAX_CLIPPED_COUPONS_LIMIT_REACHED]:!0});n=(0,r.A)({},e,{[L.Ay.COUPON_STATUS]:s})}return M(n,t,o.krogerCouponNumber)},[a.$t]:(e,o)=>{var t=R(a.$t);return M(e,t,o.krogerCouponNumber)},[a.SM]:(e,o)=>{var t=R(a.SM),n=M(e,t,o.krogerCouponNumber);n=H(n,{subStatusCode:"",maxCouponLimitReached:!1,error:!1});var s=e[L.Ay.RECENTLY_CLIPPED_COUPONS].filter((e=>e!==o.coupon.krogerCouponNumber)),l=e[L.Ay.CLIPPED_COUPONS][L.Ay.CLIPPED_COUPON_COUNT]-1;if(!0===e[L.Ay.COUPON_STATUS][L.Ay.MAX_CLIPPED_COUPONS_LIMIT_REACHED]&&l<i.xH){var c=(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.MAX_CLIPPED_COUPONS_LIMIT_REACHED]:!1});n=(0,r.A)({},n,{[L.Ay.COUPON_STATUS]:c})}var u=(0,r.A)({},e[L.Ay.COUPONS_NUMBER]),p=Object.values(u).filter((e=>Array.isArray(e))).flat().reduce(((e,o)=>(e.set(o.couponNumber,o),o.couponId&&e.set(o.couponId,o),e)),new Map);return Object.entries(u).forEach((e=>{var[t,a]=e;if(Array.isArray(a)){var n=new Map(a.map((e=>[e.couponNumber,e]))),s=n.get(o.krogerCouponNumber);if(s){s.hidden=!1,s.clipped=!1;var r=p.get(s.flexRetailerCouponId);r&&(r.hidden=!1)}u[t]=Array.from(n.values())}})),(0,r.A)({},n,{[L.Ay.CLIPPED_COUPONS]:{[L.Ay.CLIPPED_COUPON_COUNT]:l},[L.Ay.COUPONS_NUMBER]:u,[L.Ay.RECENTLY_CLIPPED_COUPONS]:s})},[a.Tb]:(e,o)=>{var t=R(a.Tb,{subStatusCode:o.subStatusCode});return M(e,t,o.krogerCouponNumber)},[a.YW]:B,[a.gW]:F,[a.mx]:B,[a.pi]:(e,o)=>{var{couponList:t,couponsNumber:a}=o.payload;return(0,r.A)({},e,{[L.Ay.COUPON_LIST]:t,[L.Ay.COUPONS_NUMBER]:a,[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.LOADING_KEY]:!1,[L.Ay.LOADING_REASON_KEY]:L.u0.DONE})})},[a.yy]:e=>(0,r.A)({},e,{[L.Ay.RECENTLY_CLIPPED_COUPONS]:[]})};const K=function(e,o){return void 0===e&&(e=x),o.type in G?G[o.type](e,o):e};var V={couponsNumber:[],couponsFetchError:!1,status:{loading:!1,loadingReason:""}},Y=e=>(0,r.A)({},e,{[L.Ay.COUPONS_NUMBER]:[],[L.Ay.COUPONS_FETCH_ERROR]:!1}),j={[a.qs]:(e,o)=>{var t=e[L.Ay.COUPONS_NUMBER].filter((e=>e!==o.payload.coupon.krogerCouponNumber));return(0,r.A)({},e,{[L.Ay.COUPONS_NUMBER]:t})},[a.pi]:(e,o)=>{var{couponsNumber:t}=o.payload;return(0,r.A)({},e,{[L.Ay.COUPONS_NUMBER]:t})},[a.kg]:(e,o)=>{var{couponData:t}=o.payload,{couponsNumber:a}=t,n=e[L.Ay.COUPONS_NUMBER]||[],s=[...new Set([...n,...a])];return(0,r.A)({},e,{[L.Ay.COUPONS_NUMBER]:s,[L.Ay.COUPONS_FETCH_ERROR]:!1,[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.LOADING_KEY]:!1,[L.Ay.LOADING_REASON_KEY]:L.u0.DONE})})},[a.Gr]:e=>(0,r.A)({},e,{[L.Ay.COUPONS_FETCH_ERROR]:!0,[L.Ay.COUPON_STATUS]:(0,r.A)({},e[L.Ay.COUPON_STATUS],{[L.Ay.LOADING_KEY]:!1})}),[a.Qr]:Y,[a.YW]:Y,[a.mx]:Y,[a.kA]:e=>(0,r.A)({},e,{[L.Ay.COUPON_STATUS]:{[L.Ay.LOADING_KEY]:!0,[L.Ay.LOADING_REASON_KEY]:L.u0.FETCHING}})},W=function(e,o,t){return void 0===e&&(e=V),j[o.type]?j[o.type](e,o):t(e,o)};var Q=t(596137),z={clippedSavings:{loaded:!1,loading:!1,error:!1,clippedCouponsCount:0,expiringCouponsCount:0,clippedCouponSavings:0,showRefreshMessage:!1},annualSavings:{loaded:!1,loading:!1,error:!1,amountSaved:0}},q=(e,o)=>(0,r.A)({},e,{clippedSavings:(0,r.A)({},e.clippedSavings,o)}),X=(e,o)=>(0,r.A)({},e,{annualSavings:(0,r.A)({},e.annualSavings,o)});const J=function(e,o){var t,n;void 0===e&&(e=z);var s=function(e,o,t,a,n){if(void 0===n&&(n=u.CLIP),!a)return{clippedCouponsCount:o,expiringCouponsCount:e,clippedCouponSavings:t};var s,r=(e=>e&&void 0!==e.savings&&null!==e.savings?"number"!=typeof e.savings||Number.isNaN(e.savings)?"string"!=typeof e.savings||Number.isNaN(Number(e.savings))?0:Number(e.savings):e.savings:0)(a),i=(s=a.expirationDate,(0,Q.z6)(new Date(s))<=5);return{clippedCouponsCount:"CLIP"===n?o+1:Math.max(0,o-1),expiringCouponsCount:i?"CLIP"===n?e+1:Math.max(0,e-1):e,clippedCouponSavings:"CLIP"===n?t+r:Math.max(0,t-r)}},i={[a.nA]:()=>q(e,{loading:!0}),[a.PU]:()=>{var t,a,n,{expiringCouponsCount:s=0,clippedCouponSavings:r=0}=null!==(t=o.payload)&&void 0!==t?t:{};return q(e,{loading:!1,loaded:!0,clippedCouponsCount:void 0!==(null===(a=o.payload)||void 0===a?void 0:a.clippedCount)?o.payload.clippedCount:void 0!==(null===(n=o.payload)||void 0===n?void 0:n.clippedCouponsCount)?o.payload.clippedCouponsCount:0,expiringCouponsCount:s,clippedCouponSavings:r,error:!1})},[a.Uk]:()=>q(e,{error:!0,loaded:!0,loading:!1}),[a.hF]:()=>409===o.statusCode&&"CantLoadCoupon"===o.subStatusCode?q(e,{showRefreshMessage:!0}):e,[a.aU]:()=>X(e,{loading:!0}),[a.e]:()=>{var t,{annualSaving:a}=null!==(t=o.payload)&&void 0!==t?t:{};return X(e,{loading:!1,loaded:!0,error:!1,amountSaved:a||0})},[a.DF]:()=>{var o={loading:!1,loaded:!0,error:!0,amountSaved:z.annualSavings.amountSaved};return X(e,o)},[a.my]:()=>{var{coupon:t,updateType:a}=null!=o?o:{},{clippedSavings:n}=e,i=s(n.expiringCouponsCount,n.clippedCouponsCount,n.clippedCouponSavings,t,a);return(0,r.A)({},e,{clippedSavings:(0,r.A)({},n,i)})}};return null!==(t=null===(n=i[o.type])||void 0===n?void 0:n.call(i))&&void 0!==t?t:e};var Z=(e,o)=>{var t,a,n,s=null!==(t=null==o||null===(a=o.payload)||void 0===a||null===(n=a.couponData)||void 0===n?void 0:n.couponContext)&&void 0!==t?t:null;return s?(0,r.A)({},e,{[s]:W(e[s],o,J)}):e};const $=(e,o)=>{var t=K(e,o);return(0,r.A)({},t,{[L.Ay.COUPONS_GRID]:Z(t[L.Ay.COUPONS_GRID],o)})};var ee={loading:!0,loaded:!1,error:!1,brands:[],categories:[],specialSavings:[],modalities:[],newCouponsCount:0,isAllCouponsClicklistToggled:!1,searchString:""},oe=e=>()=>Object.assign({},e,{brands:[],categories:[],specialSavings:[],modalities:[]});const te=function(e,o){void 0===e&&(e=ee);var t={[a.sy]:()=>Object.assign({},e,{loading:!0,brands:[],categories:[],specialSavings:[],loaded:!1}),[a.uv]:()=>{var{categories:t=[],brands:a=[],offers:n=[],newCouponsCount:s=0}=o.payload||{};return Object.assign({},e,{loading:!1,categories:t,brands:a,specialSavings:n,newCouponsCount:s,loaded:!0})},[a.Br]:()=>Object.assign({},e,{loading:!1,error:!0,loaded:!0}),[a.SX]:oe(e),[a.mH]:oe(e),[a.hy]:()=>{var t,a,n,s=[null===(t=o.payload)||void 0===t?void 0:t.brandName],r=null===(a=o.payload)||void 0===a?void 0:a.categories,i=null===(n=o.payload)||void 0===n?void 0:n.specialSavings,l=(e,o)=>Object.assign({},e,o),c=(e,o)=>e.map((e=>o&&o.indexOf(e.name)>-1?l(e,{count:e.count-1}):l(e,{})));return l(e,{brands:c(e.brands,s),categories:c(e.categories,r),specialSavings:c(e.specialSavings,i)})},[a.Av]:()=>Object.assign({},e,{isAllCouponsClicklistToggled:!0}),[a.eY]:()=>Object.assign({},e,{isAllCouponsClicklistToggled:!1}),[a.qK]:()=>{var t;return(0,r.A)({},e,{searchString:null===(t=o.payload)||void 0===t?void 0:t.searchString})},[a.hI]:()=>(0,r.A)({},e,{searchString:""})};return t[o.type]?t[o.type]():e};var ae={showFilters:{[i.wn.ALL_COUPONS]:!0,[i.wn.BY_DEPARTMENT]:!0,[i.wn.CLIPPED_COUPONS]:!0,[i.wn.ALL_CASHBACK]:!0,[i.wn.LOADED_CASHBACK]:!0}};const ne=function(e,o){switch(void 0===e&&(e=ae),o.type){case a.g9:return Object.assign({},e,{showFilters:{[i.wn.ALL_COUPONS]:o.payload.showFilters,[i.wn.BY_DEPARTMENT]:!0,[i.wn.CLIPPED_COUPONS]:!0,[i.wn.ALL_CASHBACK]:!0,[i.wn.LOADED_CASHBACK]:!0}});case a.Me:return Object.assign({},e,{showFilters:{[i.wn.ALL_COUPONS]:!0,[i.wn.BY_DEPARTMENT]:o.payload.showFilters,[i.wn.CLIPPED_COUPONS]:!0,[i.wn.ALL_CASHBACK]:!0,[i.wn.LOADED_CASHBACK]:!0}});case a.DG:return Object.assign({},e,{showFilters:{[i.wn.ALL_COUPONS]:!0,[i.wn.BY_DEPARTMENT]:!0,[i.wn.CLIPPED_COUPONS]:o.payload.showFilters,[i.wn.ALL_CASHBACK]:!0,[i.wn.LOADED_CASHBACK]:!0}});case a.VV:return Object.assign({},e,{showFilters:{[i.wn.ALL_COUPONS]:!0,[i.wn.BY_DEPARTMENT]:!0,[i.wn.CLIPPED_COUPONS]:!0,[i.wn.ALL_CASHBACK]:o.payload.showFilters,[i.wn.LOADED_CASHBACK]:!0}});case a.fT:return Object.assign({},e,{showFilters:{[i.wn.ALL_COUPONS]:!0,[i.wn.BY_DEPARTMENT]:!0,[i.wn.CLIPPED_COUPONS]:!0,[i.wn.ALL_CASHBACK]:!0,[i.wn.LOADED_CASHBACK]:o.payload.showFilters}});case a.q3:return ae;default:return e}};var se={loading:!1,loaded:!1,error:!1,couponDetails:{}};var re={[L.Ay.TAB_HEADER_UNCLIPPED_COUNT]:0,[L.Ay.TAB_HEADER_CLIPPED_COUNT]:0};var ie={shoppersCardBalance:{value:"0.00",loading:!1,error:!1}};const le={modal:function(e,o){switch(void 0===e&&(e=n),o.type){case a.zK:return Object.assign({},e,{couponId:o.payload.couponId,couponIndex:o.payload.couponIndex,couponContext:o.payload.couponContext,ppr:o.payload.ppr,isOpen:!0});case a.F4:return Object.assign({},e,{couponId:null,couponContext:null,isOpen:!1});default:return e}},couponShipModal:function(e,o){var t,n;switch(void 0===e&&(e=s),o.type){case a.cu:return Object.assign({},e,{couponNumber:null===(t=o.payload)||void 0===t?void 0:t.couponNumber,couponContext:null===(n=o.payload)||void 0===n?void 0:n.couponContext,isOpen:!0,isOpenedOnce:!0});case a.aY:return Object.assign({},e,{couponNumber:null,couponContext:null,isOpen:!1});default:return e}},couponQualifyingProducts:function(e,o){var t,n,s,c,u,p,d;switch(void 0===e&&(e=l),void 0===o&&(o=l[i.QW]),o.type){case a.uy:return(0,r.A)({},e,{[null===(t=o)||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.keySpace]:{upcs:null===(s=o.payload)||void 0===s?void 0:s.upcs,status:0===(null===(c=o)||void 0===c||null===(u=c.payload)||void 0===u?void 0:u.upcs.length)?i.NE:i.KB}});case a.b8:return(0,r.A)({},e,l);case a.tE:return(0,r.A)({},e,{[null===(p=o)||void 0===p||null===(d=p.payload)||void 0===d?void 0:d.keySpace]:{status:i.yb,upcs:[]}});default:return e}},selectedCouponsFilters:function(e,o){return void 0===e&&(e=p),void 0===m[o.type]?e:m[o.type](e,o)},refineByModal:function(e,o){switch(void 0===e&&(e=A),o.type){case a.dx:return Object.assign({},e,{isCouponRefineByModalOpen:!0});case a.Jm:return Object.assign({},e,{isCouponRefineByModalOpen:!1});default:return e}},sortDropDown:function(e,o){switch(void 0===e&&(e=O),o.type){case a.YW:return(0,r.A)({},e,{[E]:o.sortType});case a.Lr:return(0,r.A)({},e,{[E]:S.A.RELEVANCE.value});default:return e}},printModal:h,clippedCouponsTypeReducer:function(e,o){var t;switch(void 0===e&&(e=P),void 0===o&&(o={}),null===(t=o)||void 0===t?void 0:t.type){case a.mx:return(0,r.A)({},e,{[T]:o.payload.selectedClippedCouponsType});case a.By:return(0,r.A)({},e,{[T]:i.cl.ACTIVE});default:return e}},couponCounts:function(e,o){void 0===e&&(e=I);var t=()=>(0,r.A)({},e,{[L.Ay.DISPLAYED_COUPON_COUNT]:0,[L.Ay.TOTAL_COUPON_COUNT]:0}),n={[a.kg]:()=>{var t,{payload:a}=o,n=e[L.Ay.DISPLAYED_COUPON_COUNT]+Object.keys(null===(t=o.payload)||void 0===t?void 0:t.couponData.coupons).length;return(0,r.A)({},e,{[L.Ay.DISPLAYED_COUPON_COUNT]:n,[L.Ay.TOTAL_COUPON_COUNT]:a.couponData.count})},[a.Qr]:t,[a.nQ]:t,[a.yy]:t,[a.mx]:t,[a.YW]:t,[a.qs]:()=>{var o=e[L.Ay.DISPLAYED_COUPON_COUNT],t=e[L.Ay.TOTAL_COUPON_COUNT];return(0,r.A)({},e,{[L.Ay.DISPLAYED_COUPON_COUNT]:o-1,[L.Ay.TOTAL_COUPON_COUNT]:t-1})}};return n[o.type]?n[o.type]():e},couponDetailsPage:function(e,o){void 0===e&&(e=U);var t={[a.JN]:()=>Object.assign({},e,{loading:!0,loaded:!1}),[a.LD]:()=>{var{coupon:t}=o.payload;return Object.assign({},e,{loading:!1,loaded:!0,error:!1,couponDetails:t})},[a.yZ]:()=>{var o=Object.assign({},e.couponDetails,{showCouponsSuccessMessage:!1});return Object.assign({},e,{couponDetails:o})},[a.AV]:()=>{var t=i.Sd.CLIENT_ERROR;return o.payload.statusCode&&(t="404"===o.payload.statusCode.toString()?i.Sd.NOT_FOUND:i.Sd.SERVICE_ERROR),Object.assign({},e,{loading:!1,loaded:!0,error:!0,couponDetails:{},errorInfo:t})},[a.Z6]:()=>U,default:()=>U};return t[o.type]?t[o.type]():((e,o)=>{var t=R(o.type,{subStatusCode:o.subStatusCode,maxCouponLimitReached:o.maxCouponLimitReached});if(!D()(t)){var a=Object.assign({},e.couponDetails,t);return Object.assign({},e,{couponDetails:a})}return e})(e,o)},coupons:$,couponsFilters:te,couponFilterToggle:ne,savingsInfo:J,couponMetaDetailsReducer:function(e,o){void 0===e&&(e=se);var t={[a.D7]:()=>Object.assign({},e,{loading:!0,loaded:!1}),[a.bs]:()=>{var t,a=(null===(t=o.payload)||void 0===t?void 0:t.coupon)||{};return Object.assign({},e,{loading:!1,loaded:!0,error:!1,couponDetails:a})},[a.ki]:()=>{var t,a=i.Sd.CLIENT_ERROR;return null!==(t=o.payload)&&void 0!==t&&t.statusCode&&(a="404"===o.payload.statusCode.toString()?i.Sd.NOT_FOUND:i.Sd.SERVICE_ERROR),Object.assign({},e,{loading:!1,loaded:!0,error:!0,couponDetails:{},errorInfo:a})},default:()=>se};return t[o.type]?t[o.type]():e},couponTabHeaderCounts:function(e,o){switch(void 0===e&&(e=re),o.type){case a.kg:return function(e,o){void 0===e&&(e={});var{couponData:t,unClippedCount:a,clippedCount:n}=e;return(null==t?void 0:t.couponContext)===i.wn.ALL_CASHBACK?(0,r.A)({},o,{[L.Ay.TAB_HEADER_UNCLIPPED_COUNT]:null==t?void 0:t.count,[L.Ay.TAB_HEADER_CLIPPED_COUNT]:n||o[L.Ay.TAB_HEADER_CLIPPED_COUNT]}):(null==t?void 0:t.couponContext)===i.wn.LOADED_CASHBACK?(0,r.A)({},o,{[L.Ay.TAB_HEADER_UNCLIPPED_COUNT]:a||o[L.Ay.TAB_HEADER_UNCLIPPED_COUNT],[L.Ay.TAB_HEADER_CLIPPED_COUNT]:t.count}):o}(o.payload,e);case a.Uo:return(0,r.A)({},e,{[L.Ay.TAB_HEADER_CLIPPED_COUNT]:e[L.Ay.TAB_HEADER_CLIPPED_COUNT]+1});case a.SM:return(0,r.A)({},e,{[L.Ay.TAB_HEADER_CLIPPED_COUNT]:e[L.Ay.TAB_HEADER_CLIPPED_COUNT]-1});case a.qs:return(0,r.A)({},e,{[L.Ay.TAB_HEADER_UNCLIPPED_COUNT]:e[L.Ay.TAB_HEADER_UNCLIPPED_COUNT]+1});default:return e}},cashback:function(e,o){void 0===e&&(e=ie);var t={[a.w1]:()=>(0,r.A)({},e,{shoppersCardBalance:(0,r.A)({},e.shoppersCardBalance,{loading:!0})}),[a.AG]:()=>(0,r.A)({},e,{shoppersCardBalance:{value:o.payload.shoppersCardBalance,loading:!1,error:!1}}),[a.tX]:()=>(0,r.A)({},e,{shoppersCardBalance:(0,r.A)({},e.shoppersCardBalance,{loading:!1,error:!0})})};return t[o.type]?t[o.type]():e}}},726415:(e,o,t)=>{t.d(o,{KZ:()=>u,XS:()=>c,b3:()=>p});var a=t(58168),n=t(800064),s=t(18227),r=t(160477),i=t(183043),l=t(801081),c=(0,l.createSelector)((e=>n.useCases.points.getBenefitsSummary.selectors.get(i.iN.keySpace)(e)),(e=>n.useCases.points.getBenefitsSummary.selectors.async(i.iN.keySpace)(e)),((e,o)=>{var t=null!=o&&o.loaded?(0,s.Xd)(null==e?void 0:e.benefitsSummary):void 0,a=(null==t?void 0:t.dollarsRaw)||0;return{loading:Boolean(null==o?void 0:o.loading),error:Boolean(null==o?void 0:o.error),value:a.toFixed(2)}})),u=(0,l.createSelector)(n.useCases.savingsCoupons.getCashback.selectors.async(i.hP.keySpace),n.useCases.savingsCoupons.getCashback.selectors.get(i.hP.keySpace),((e,o)=>{var t,n,{loading:s,loaded:r,error:i}=e||{},{balances:l}=o||{},c={available:Number(null!==(t=null==l?void 0:l.paypal)&&void 0!==t?t:0),minimum:.01,maximum:99.99},u={available:Number(null!==(n=null==l?void 0:l.shopperCard)&&void 0!==n?n:0),minimum:.01,maximum:999.99};return{cashback:(0,a.A)({},l,{loading:s,loaded:r,error:i}),payPal:c,shopperCard:u,loading:s,loaded:r,error:i}})),p=(0,l.createSelector)(n.useCases.savingsCoupons.redeemCashback.selectors.async(i.hP.keySpace),n.useCases.savingsCoupons.redeemCashback.selectors.errors(i.hP.keySpace),((e,o)=>{var t,{loading:a,loaded:n,error:s}=e||{};return{redemption:{loaded:n,loading:a,error:s,errorCode:null===(t=(0,r.a)(o))||void 0===t?void 0:t.statusCode}}}))},382601:(e,o,t)=>{t.d(o,{BK:()=>i,Mt:()=>c,Wm:()=>s});var a=t(801081),n=t(405173),s=e=>{var o,t,{COUPON_STATUS:a,LOADING_KEY:s}=n.Ay;return(null==e||null===(o=e.coupons)||void 0===o||null===(t=o[a])||void 0===t?void 0:t[s])||!1},r=e=>e.coupons&&e.coupons[n.Ay.COUPONS_GRID],i=e=>e.coupons&&e.coupons[n.Ay.COUPON_LIST]||{},l=(e,o,t)=>(o=o||{},null==e?void 0:e.filter((e=>((e,o)=>{var t;return Boolean(null==e||null===(t=e.modalities)||void 0===t?void 0:t.includes(o))})(o[e.couponNumber],t)))),c=e=>{var o=(0,a.createSelector)([r],(o=>{if("object"!=typeof o)return!1;if(o[e])return o[e];var t=Object.keys(o).find((o=>null==o?void 0:o.startsWith(e+n.Ay.GRID_ID_DELIMITER)));return t&&o[t]})),t=(0,a.createSelector)([o],(e=>e?e[n.Ay.COUPONS_NUMBER]:[])),s=(0,a.createSelector)([o],(e=>e&&e[n.Ay.COUPONS_FETCH_ERROR])),c=(0,a.createSelector)([o],(e=>!e||e[n.Ay.COUPON_STATUS][n.Ay.LOADING_KEY])),u=(0,a.createSelector)([o],(e=>e&&e.clippedSavings||{})),p=(0,a.createSelector)([t,i,(e,o)=>o],((e,o,t)=>l(e,o,t)));return{getCouponList:i,getCouponNumbers:t,getCouponFetchError:s,isCouponLoading:c,getClippedSavings:u,getCouponsNumbersWithCurrentModality:p}}},602871:(e,o,t)=>{t.d(o,{V7:()=>d,eM:()=>m,jX:()=>p,pG:()=>C});var a=t(58168),n=t(769175),s=t(800064),r=t(863960),{async:i,getMeta:l,get:c}=s.useCases.savingsCoupons.getCoupons.selectors,u=l,p=(0,n.createCachedSelector)(((e,o)=>i(o)(e)),((e,o)=>c(o)(e)),((e,o)=>u(o)(e)),(function(e,o,t){void 0===e&&(e={loaded:!1,loading:!1,error:!1});var{loading:n,loaded:s,error:r}=e,i={coupons:null!=o?o:[],couponsLoaded:s,couponsLoading:n,couponsErrored:r,clippedCouponCount:0,clippedSavingsTotalValue:0,expiringCount:0,unclippedCount:0,totalCouponCount:0,newCouponsCount:0,filters:{categories:[],specialSavings:[]},displayCount:(null==o?void 0:o.length)||0,page:{hasMore:!1,size:0,offset:0}};if(s&&!r){var{filterSummaryByType:{totalCount:l,newCouponsCount:c,categories:u,specialSavings:p},userSavingsInfoByType:d,page:C}=t,m={categories:(null==u?void 0:u.options)||[],specialSavings:(null==p?void 0:p.options)||[]},{standard:A,cashback:S}=d,{clippedCount:E,clippedSavingsTotalValue:O,expiringCount:v,unclippedCount:N}=null!=A?A:S;i=(0,a.A)({},i,{totalCouponCount:l,newCouponsCount:c,filters:m,clippedCouponCount:E,clippedSavingsTotalValue:O,expiringCount:v,unclippedCount:N,page:C})}return i}))({keySelector:(e,o)=>o,cacheObject:new n.LruMapCache({cacheSize:16})}),d=e=>(0,s.createDomainSelector)(r.Models.coupons)(e),C=(0,n.createCachedSelector)(((e,o)=>d(e)),((e,o)=>o),((e,o)=>{var t;return null==e||null===(t=e[o])||void 0===t?void 0:t.data}))({keySelector:(e,o)=>o,cacheObject:new n.LruMapCache({cacheSize:1e3})}),m=(e,o)=>({clip:s.useCases.savingsCoupons.clipUnclip.selectors.async("clipCoupon/"+o)(e),unclip:s.useCases.savingsCoupons.clipUnclip.selectors.async("unclipCoupon/"+o)(e)})},832875:(e,o,t)=>{t.d(o,{BV:()=>i,EI:()=>u,IQ:()=>p,J1:()=>C,QZ:()=>r,XJ:()=>s,i9:()=>d,jz:()=>c,rR:()=>m,t6:()=>l});var a=t(180964),n=t(801081),s=e=>!!a.selectors.getToggleOnState(e,"savings","enableWaysToShop"),r=e=>!!a.selectors.getToggleOnState(e,"savings","showAnnualSavings"),i=e=>!!a.selectors.getToggleOnState(e,"savings","showCouponsProgressBar"),l=(0,n.createSelector)((e=>a.selectors.getToggleOnState(e,"savings","titlesForHidingExpiryTag")),(e=>e?Array.isArray(e)?e:[e]:[])),c=e=>a.selectors.getToggleOnState(e,"savings","urlForShip"),u=e=>!!a.selectors.getToggleOnState(e,"savings","enableCouponExpiryValidation"),p=e=>!!a.selectors.getToggleOnState(e,"savings","showCashBack"),d=e=>a.selectors.getToggleOnState(e,"savings","couponsSpanishLink"),C=e=>!!a.selectors.getToggleOnState(e,"savings","couponsWithAlayer"),m=e=>!!a.selectors.getToggleOnState(e,"savings","enableNewSavingsDashboard")},166234:(e,o,t)=>{t.d(o,{V:()=>r});var a=t(315249),n=t(401442),s=t(108118),r=(e,o,t)=>{var r;/4{?!00|11}|\d{2}/.test(null===(r=e.statusCode)||void 0===r?void 0:r.toString())&&(0,n.A)({teamName:a.g.Savings,eventObjects:{applicationErrors:[{category:o.page,httpResponse:{absolutePath:t,statusCode:e.statusCode},message:e.reason,type:s.TD.UserConstraint}],components:[{name:null==o?void 0:o.component}]}})}},795868:(e,o,t)=>{t.d(o,{o:()=>r});var a=e=>e.map((e=>e.toLowerCase())).join("_"),n=e=>e.length>0,s={selectedBrands:{key:"brands",anySelected:n,values:a},selectedModalities:{key:"modalities",anySelected:n,values:a},selectedCategories:{key:"categories",anySelected:n,values:a},selectedSpecialSavings:{key:"specialsavings",anySelected:n,values:a},newCouponsChecked:{key:"featured",anySelected:e=>!!e,values:()=>"new coupons"},showClickListOffers:{key:"clicklist offers",anySelected:(e,o)=>o,values:e=>(e?"show":"hide")+" clicklist offers"},searchString:{key:"search coupons",anySelected:e=>e.length>0,values:e=>e}},r=function(e,o,t){void 0===t&&(t=!1);var a=e&&Object.keys(e).filter((o=>s[o].anySelected(e[o],t))).map((o=>s[o].values(e[o]))).map((e=>e.replace("in_store","in-store")));return{filterSource:o,filterOption:e&&Object.keys(e).filter((o=>s[o].anySelected(e[o],t))).map((e=>s[e].key)).join("_"),filterChoice:a&&a.join("_")}}},965873:(e,o,t)=>{t.d(o,{DD:()=>S,DK:()=>C,Lb:()=>m,df:()=>O,hF:()=>d,oL:()=>v,rW:()=>A,tI:()=>E});var a=t(58168),n=t(355364),s=t.n(n),r=t(962193),i=t.n(r),l=t(183043),c=t(9090),u=t(95531),p=(e,o)=>{var t=(0,a.A)({"filter.status":o?["unclipped","active"]:"unclipped"},!o&&{"page.size":l.Jw,"page.offset":l.g0});return{[l.wn.BY_DEPARTMENT]:t,[l.wn.CLIPPED_COUPONS]:(0,a.A)({},t,{"filter.status":"active"}),[l.wn.LOADED_CASHBACK]:(0,a.A)({},t,{"filter.status":"active","filter.type":["cash_back"]}),[l.wn.ALL_CASHBACK]:(0,a.A)({},t,{"filter.status":["unclipped","active"],"filter.type":["cash_back"]},!o&&{"page.size":l.yQ}),[l.wn.ALL_COUPONS]:(0,a.A)({},t,{"filter.status":["unclipped","active"]},!o&&{"page.size":l.yQ})}[e]},d=e=>Object.keys(e).filter((o=>{var t=e[o];return"string"==typeof t&&!i()(t)||"number"==typeof t||"boolean"==typeof t||Array.isArray(t)&&t.length>0})),C=function(e){return void 0===e&&(e={}),d(e).map((o=>{var t=e[o];return Array.isArray(t)?t.map((e=>o+"="+encodeURIComponent(e))).join("&"):o+"="+encodeURIComponent(e[o])})).join("&")},m=(e,o)=>{var t=C(o);return""===t?e:e+"?"+t},A=e=>{var o=e.tabSelected||"",t=e.newCouponsSelected?e.newCouponsSelected.toString():"false",{selectedBrands:n,selectedCategories:r,selectedSpecialSavings:i,selectedModalities:c,sortType:u,searchString:p}=e,d={brand:n,category:r,specialSaving:i,modalities:c,couponsCountPerLoad:l.Jw,sortType:u,newCoupons:t},C=(0,a.A)({"filter.brand":n,"filter.category":r,"filter.specialSavings":i,"filter.modality":c,"filter.sort":u,"filter.onlyNewCoupons":t},o!==l.wn.BY_DEPARTMENT?{"page.size":l.Jw}:{});return o===l.wn.CLIPPED_COUPONS?(s()(C,{"filter.status":"active"}),C):o===l.wn.LOADED_CASHBACK?(s()(d,{type:l.cF.CASH_BACK}),s()(C,{"filter.status":"active","filter.type":["cash_back"]}),C):(p&&(s()(d,{searchString:p}),s()(C,{"filter.searchString":p})),o===l.wn.ALL_CASHBACK?(s()(d,{type:l.cF.CASH_BACK}),s()(C,{"filter.type":["cash_back"],"filter.status":["unclipped","active"]}),C):o===l.wn.ALL_COUPONS?(s()(C,{"filter.status":["unclipped","active"]}),C):(s()(C,{"filter.status":o!==l.wn.BY_DEPARTMENT?"unclipped":["unclipped","active"]}),C))},S=e=>{var o={};return Object.keys(e).forEach((t=>{t.toLowerCase()===l.uB.NEW_COUPONS?o.newCoupons=e[t]:o[t.toLowerCase()]=e[t]})),(0,a.A)({},o)},E=(e,o)=>{var{tabId:t,showClippedBoolean:n}=e,{brand:s,category:r,projections:i=["coupons.compact"],savings:c,newCoupons:u,searchString:d,selectedModalities:C}=o;if(t===l.wn.CLIPPED_COUPONS)return(e=>e.sorttype?(0,a.A)({"filter.sort":e.sorttype,projections:e.projections},p(l.wn.CLIPPED_COUPONS)):p(l.wn.CLIPPED_COUPONS))(o);if(t===l.wn.LOADED_CASHBACK)return p(t);var m={"filter.brand":s,"filter.category":r,"filter.specialSavings":c,"filter.onlyNewCoupons":u,projections:i},A=(0,a.A)({},m,{"filter.searchString":d,"filter.modality":C});if(t===l.wn.ALL_CASHBACK){var S=(0,a.A)({},m,p(t,n));return n?(0,a.A)({},S,{"filter.type":["cash_back"]}):S}return n?(0,a.A)({},A,p(t,n)):(0,a.A)({},A,p(t))},O=e=>{var o={[c.HeaderKeys.LAFObject]:u.modalityPreferences.selectors.getLAFHeader(e,!0)},t=u.modalityPreferences.selectors.getGeoLocationV1(e);return t&&(o[c.HeaderKeys.GeoLocationV1]=JSON.stringify(t)),o},v=(e,o,t)=>{var{tabId:a,showClippedBoolean:n,id:s="getCoupons"}=e,r=E({tabId:a,showClippedBoolean:n},o),i=t();return{method:l.B1.GET,calypsoParams:r,body:{},id:s,headers:O(i)}}},423583:(e,o,t)=>{t.d(o,{A:()=>O});var a=t(58168),n=t(296540),s=t(416683),r=t(95531),i=t(100577),l=t(282971),c=t(248688),u=t(606091),p=t(119269),d=t(678537),C=t(616962),m=t(369465);const A=e=>{var{couponStatus:o,coupon:t,classNames:a}=e,{maxCouponLimitReached:s,subStatusCode:r,couponExpired:l}=t,c=o===C.rJ&&(s||r===m.MG),u=o===C.fZ&&(l||r===m.fZ),p=e=>n.createElement(i.A,{kind:"subtle",palette:"negative",variant:"fill",icon:n.createElement(d.c,{"aria-hidden":"true"}),role:"alert","data-testid":"ButtonFeedbackErrorMessage",className:a+" max-w-full",tabIndex:0},e),A="CASH_BACK"===t.type?m.Ai:m.jf;return c?p(A[m.MG]):u?p(A[m.fZ]):A[""+r]?p(A[r]):o===C.d?p(m.CY[t.type]):p(m.hv[t.type])};var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];const E=e=>{var{coupon:o,couponStatus:t,classNames:a,shouldShowNewSuccessMessageForCoupons:s,shouldDisplayFlexOfferMessage:r}=e,{error:d,showCouponsSuccessMessage:C,lastRedemptionDate:m,redemptionsAllowed:E,status:O}=o,v="CASH_BACK"===o.type,N=s&&!v;if(d)return n.createElement(A,{coupon:o,couponStatus:t,classNames:a||""});if(C)return N?n.createElement(i.A,{kind:"subtle",palette:"callout",variant:"fill",icon:n.createElement(l.i,{"aria-hidden":"true"}),role:"alert",className:"ButtonFeedback-animation "+a+" max-w-full","data-testid":"ButtonFeedbackSuccessMessage",tabIndex:0},"Make sure item is in your cart to get savings."):n.createElement(i.A,{kind:"subtle",palette:"positive",variant:"fill",icon:n.createElement(c.l,{"aria-hidden":"true"}),role:"dialog",className:"ButtonFeedback-animation "+a+" max-w-full","data-testid":"ButtonFeedbackSuccessMessage",tabIndex:0},v?"Deal Loaded":"Coupon Clipped");if(m){var g=new Date(m),y=S[g.getMonth()]+". "+g.getDate();return n.createElement(i.A,{kind:"subtle",palette:"informative",variant:"fill",icon:n.createElement(u.G,{"aria-hidden":"true"}),role:"dialog",className:a,"data-testid":"ButtonFeedbackRedeemedMessage",tabIndex:0},"Redeemed ",-1===E?"":y,"redeemed"!==O&&" - can use again")}return r?v?n.createElement(i.A,{kind:"subtle",palette:"informative",variant:"fill",icon:n.createElement(u.G,{"aria-hidden":"true"}),role:"complementary","data-testid":p.iI.COUPON.FLEX_COUPON_MESSAGE,className:"my-8 rounded-medium "+a},p.bj.FLEX_COUPON_MESSAGE):n.createElement(i.A,{kind:"subtle",palette:"informative",variant:"fill",icon:n.createElement(u.G,{"aria-hidden":"true"}),role:"complementary","data-testid":p.iI.COUPON.FLEX_COUPON_MESSAGE,className:"my-8 rounded-medium "+a},p.n2.FLEX_COUPON_MESSAGE):n.createElement("div",{"data-testid":"ButtonFeedback-empty",className:"ButtonFeedback-empty "+a})};const O=e=>"FL"===(0,s.useSelector)((e=>r.modalityPreferences.selectors.getActiveHandoffState(e)))?n.createElement(E,(0,a.A)({},e,{shouldShowNewSuccessMessageForCoupons:!0})):n.createElement(E,e)},564404:(e,o,t)=>{t.d(o,{A:()=>i});var a=t(58168),n=t(296540),s=t(880186),r=t(76060);const i=e=>{var{hideActions:o=!0,inverse:t,type:i,onNoResults:l}=e,c=t?" text-primary-inverse":"";(0,n.useEffect)((()=>{l&&l()}),[l]);var u={containerClassName:"sm:px-8",iconImage:n.createElement(s.d,{size:"l"}),message:"We're not finding any "+("CASH_BACK"===i?"cash back deals ":"coupons ")+"right now, please try again later.",messageClassName:"text-left"},p={actionButtonText:"Try Again",onActionButtonClick:()=>window.location.reload()},d=o?u:(0,a.A)({},u,p);return n.createElement("div",{className:"my-8 sm:my-32 flex "+c},n.createElement(r.A,d))}},12:(e,o,t)=>{t.d(o,{A:()=>C});var a=t(580218),n=t.n(a),s=t(442426),r=t.n(s),i=t(296540),l=t(917705),c=t(32485),u=t.n(c),p=t(17693),d=t(596137);const C=e=>{var o,{coupon:t,inverse:a=!1,titlesForHidingExpiryTag:s,className:c=""}=e,{expirationDate:C}=t,m=new Date(C),A="Exp. "+(0,l.format)(m,"MMM. DD "),S=(0,d.z6)(m),E=(o=S)>5?"":1===o?o+" day left!":0===o?"Today!":o<0?"Expiring soon!":o+" days left!";return!(s&&r()(s,(e=>e===n()(t.title))))?i.createElement("div",{className:"CouponExpiration "+c},i.createElement(p.A,{size:"s",className:u()("CouponExpiration-text CouponExpiration-textDate",{"text-neutral-more-prominent":!a,"text-primary-inverse":a}),"data-testid":"CouponExpiryDate-"+t.id},A),E&&i.createElement(i.Fragment,null,i.createElement(p.A,{className:u()({"text-neutral-more-prominent":!a,"text-primary-inverse":a}),size:"s"},"-"),i.createElement(p.A,{size:"s",className:"CouponExpiration-textDaysLeft font-bold","data-testid":"CouponExpiryDays-"+t.id}," "+E))):null}},789531:(e,o,t)=>{t.d(o,{A:()=>v});var a=t(296540),n=t(369465),s=t(616962),r=t(511087),i=t(32485),l=t.n(i),c=t(416683),u=t(867461),p={[s.iv]:{text:"Sign In To Clip",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.q2]:{text:"Enroll in Boost to Clip",kind:"prominent",palette:"accent",variant:"border",spinner:!1,disabled:!1,className:"w-full"},[s.q5]:{text:"Enroll in Boost to Clip",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.VA]:{text:"Enroll to Clip",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.w6]:{text:"Add Card to Clip",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.YW]:{text:"Clip",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.wh]:{text:"Clipping",kind:"prominent",palette:"accent",variant:"fill",spinner:!0,disabled:!0},[s.rJ]:{text:"Clip",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.e0]:{text:"Clip",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!0,className:""},[s.d]:{text:"Unclip",kind:"prominent",palette:"neutral",variant:"border",spinner:!1,disabled:!1,className:""},[s.K9]:{text:"Unclipping",kind:"prominent",palette:"neutral",variant:"border",spinner:!0,disabled:!0},[s.fZ]:{text:"Clip",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!0}},d={[s.iv]:{text:"Sign In for Cash Back",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.q2]:{text:"Enroll in Boost to Clip",kind:"prominent",palette:"accent",variant:"border",spinner:!1,disabled:!1,className:"w-full"},[s.q5]:{text:"Enroll in Boost to Clip",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.VA]:{text:"Enroll to Clip",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.w6]:{text:"Add Card to get Cash Back",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.YW]:{text:"Get Cash Back",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1,className:""},[s.wh]:{text:"Loading",kind:"prominent",palette:"accent",variant:"fill",spinner:!0,disabled:!0,className:""},[s.rJ]:{text:"Get Cash Back",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!1},[s.e0]:{text:"Get Cash Back",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!0,className:""},[s.d]:{text:"Remove",kind:"prominent",palette:"neutral",variant:"border",spinner:!1,disabled:!1,className:"CouponBtn-cancel"},[s.K9]:{text:"Removing",kind:"prominent",palette:"neutral",variant:"border",spinner:!0,disabled:!0},[s.fZ]:{text:"Get Cash Back",kind:"prominent",palette:"accent",variant:"fill",spinner:!1,disabled:!0}},C=e=>{var{couponActionHandler:o,omnitureHandler:t,couponStatus:n,coupon:i,couponIndex:C,ppr:m,additionalActions:A,className:S,couponStatusOverride:E,disabled:O=!1}=e,v=((e,o,t,a,n)=>e&&o?p.REMOVE_FROM_CARD:"CASH_BACK"===t.type?d[null!=a?a:n]:p[null!=a?a:n])((0,c.useSelector)(u.S3),!0===i.addedToCard,i,E,n),{shortDescription:N}=i,g="CASH_BACK"===i.type?"cashback":"coupon";return a.createElement(r.Ay,{kind:v.kind,palette:v.palette,variant:v.variant,compact:!0,disabled:v.disabled||O,"data-testid":"CouponActionButton-"+i.id,className:l()("CouponActionButton",v.className,S,"body-m font-medium"),indeterminate:v.spinner,"aria-live":"polite","aria-label":v.text+" for coupon: "+N+" "+g,onClick:()=>{o({coupon:i,couponIndex:C,ppr:m,additionalActions:A}),n!==s.iv&&n!==s.w6||t({coupon:i,couponIndex:C,ppr:m})}},v.text)};C.displayName="CouponActionButton";const m=C;var A=t(17693),S=t(995121),E="Cannot remove",O=e=>{var o,{toolTipErrorMessage:t,className:n=""}=e;return a.createElement("div",{className:"CannotRemoveCouponNew text-center pt-4 "+(n||""),"data-testid":"cannotRemoveCoupon"},a.createElement(A.A,{size:"s",className:"CannotRemoveCouponNew-text mr-4 text-neutral-less-prominent"},E),a.createElement(S.A,{"aria-label":E+": "+t,tabIndex:0,side:"top",align:"right",tooltipText:(o=t,a.createElement(A.A,{className:"TooltipErrorMessage",size:"s"},o))},a.createElement(A.A,{tag:"a",size:"s",bold:!0,className:"text-brand-most-prominent"},"Why?")))};O.displayName="CannotRemoveCoupon";const v=e=>{var{coupon:o,couponActionHandler:t,couponIndex:s=0,couponStatus:r,omnitureHandler:i,additionalActions:l,ppr:c=0,couponStatusOverride:u,className:p="",disabled:d=!1}=e;return"redeemed"===o.status?"CASH_BACK"===o.type?null:a.createElement("div",{"data-testid":"CouponStatus-redeemed",className:"couponCard-button"}):"active"!==o.status||o.canBeRemoved?o.error&&o.subStatusCode===n.dN?a.createElement(O,{toolTipErrorMessage:"The person you share your account with added this coupon, so it can't be removed.",className:p}):a.createElement(m,{coupon:o,couponIndex:s,omnitureHandler:i,couponActionHandler:t,couponStatus:r,couponStatusOverride:u,ppr:c,additionalActions:l,className:"CouponCard-button "+(p||""),disabled:d}):a.createElement(O,{toolTipErrorMessage:"Special offers like this remain on your card until they expire.",className:p})}},76060:(e,o,t)=>{t.d(o,{A:()=>i});var a=t(296540),n=t(227817),s=t(482049),r=t(511087);const i=e=>{var{actionButtonText:o,iconImage:t,message:i,messageClassName:l="",onActionButtonClick:c,containerClassName:u="",title:p,role:d="alert"}=e;return a.createElement("div",{className:"SavingsErrorDisplay mx-auto text-center "+u,"data-testid":"SavingsErrorDisplay",role:d},t,p&&a.createElement(n.A,{className:"font-bold mx-auto",size:"l",tag:"h1"},p),i&&a.createElement(s.A,{className:"line-length-off "+l,size:"s"},i),o&&a.createElement(r.Ay,{className:"ActionButton w-full h-32",kind:"prominent",palette:"accent",variant:"fill",onClick:c},o))}},646102:(e,o,t)=>{t.d(o,{A:()=>$});var a=t(58168),n=t(832875),s=t(303211),r=t(706037),i=t(416683),l=t(935880),c=t.n(l),u=t(962193),p=t.n(u),d=t(32485),C=t.n(d),m=t(100577),A=t(248688),S=t(678537),E=t(227817),O=t(783205),v=t(616962),N=t(296540),g=t(464463),y=t(17693);const _=e=>{var{coupon:o,detailUrl:t,onShare:a}=e,n=window.location.origin+t;return N.createElement("button",{type:"button","aria-label":"Button to share "+o.shortDescription+" coupon","data-qa":n,onClick:a,className:"kds-Link font-medium no-underline flex flex-row items-center text-accent-more-prominent bg-primary bg-opacity-transparent"},N.createElement(g.u,{"aria-hidden":"true",size:"m",className:"mr-0 text-accent-more-prominent"}),N.createElement(y.A,{size:"m",className:"font-medium"},"Copy Link"))};var h=t(86096);const T=e=>{var{shareButtonTitle:o="Share",onClickHandler:t}=e;return N.createElement("div",{"data-testid":"SocialShare-section"},N.createElement("button",{type:"button",className:"flex flex-row items-center kds-Link kds-Link--implied kds-Text--bold text-brand-more-prominent bg-primary bg-opacity-transparent SocialShare-copylink no-underline self-center h-24","aria-label":o,onClick:t,"data-testid":"SocialShare-copylink"},N.createElement(h.V,{"aria-hidden":"true","data-testid":"shareIcon",size:"m"}),N.createElement(y.A,{size:"m"},o)))};var P=t(596991),L=t(789531);const I=t.p+"images/Paypalonly-52aO3nw.svg";var f=e=>{var{className:o,enable:t}=e;return!0===t?N.createElement(O.A,{src:I,className:"w-104 pr-8 "+o,alt:"PayPal only"}):null};const D=N.memo(f);var b=t(423583),R=t(851221),U=t(12),k=t(333031),w=t.n(k),x=e=>{var{coupon:o,className:t=""}=e,{specialSavings:a}=o,n=a;return a&&(n=w()(a.filter((e=>"string"==typeof e.displayName&&!["Coupons Expiring","General Savings"].includes(e.displayName))),"displayOrder")),n&&n.length>0?N.createElement("span",{className:"bg-neutral-more-subtle w-100 flex flex-row mr-auto rounded-small justify-center items-center"},N.createElement(y.A,{className:"font-bold text-special-more-prominent p-4 "+t,size:"xs",bold:!0,tag:"span",tabIndex:0,"data-testid":"CouponSpecialSaving-"+o.id,style:{lineHeight:1}},n[0].displayName)):null};x.displayName="CouponFilterTag";var M=t(261036),H=t(623075),B=t(974076),F=t(965873),G=t(118064),K=t(592695);const V={kroger:{facebookHashtag:"kroger",twitterMessage:"Too good not to share… Thanks @kroger!",emailText:"Hey, I thought you might like this Kroger coupon! Check it out"},bakersplus:{facebookHashtag:"bakersplus",twitterMessage:"Too good not to share… Thanks @BakersGrocery!",emailText:"Hey, I thought you might like this Baker’s coupon! Check it out"},citymarket:{facebookHashtag:"citymarket",twitterMessage:"Too good not to share… Thanks @mycitymarket!",emailText:"Hey, I thought you might like this City Market coupon! Check it out"},dillons:{facebookHashtag:"dillons",twitterMessage:"Too good not to share… Thanks @DillonsGrocery!",emailText:"Hey, I thought you might like this Dillons Food Stores coupon! Check it out"},food4less:{facebookHashtag:"food4less",twitterMessage:"Too good not to share… Thanks! #food4less",emailText:"Hey, I thought you might like this Food 4 Less coupon! Check it out"},foodsco:{facebookHashtag:"foodsco",twitterMessage:"Too good not to share… Thanks! #foodsco",emailText:"Hey, I thought you might like this Foods Co. coupon! Check it out"},fredmeyer:{facebookHashtag:"fredmeyer",twitterMessage:"Too good not to share… Thanks @fred_meyer!",emailText:"Hey, I thought you might like this Fred Meyer coupon! Check it out"},frysfood:{facebookHashtag:"frysfood",twitterMessage:"Too good not to share… Thanks @FrysFoodStores!",emailText:"Hey, I thought you might like this Fry’s Food Stores coupon! Check it out"},gerbes:{facebookHashtag:"gerbes",twitterMessage:"Too good not to share… Thanks @gerbesmarket!",emailText:"Hey, I thought you might like this Gerbes Super Markets coupon! Check it out"},jaycfoods:{facebookHashtag:"jaycfoods",twitterMessage:"Too good not to share… Thanks! #jaycfoods",emailText:"Hey, I thought you might like this Jay C Food Stores coupon! Check it out"},kingsoopers:{facebookHashtag:"kingsoopers",twitterMessage:"Too good not to share… Thanks @MyKingSoopers!",emailText:"Hey, I thought you might like this King Soopers coupon! Check it out"},owensmarket:{facebookHashtag:"owensmarket",twitterMessage:"Too good not to share… Thanks! #owensmarket",emailText:"Hey, I thought you might like this Owen’s Market coupon! Check it out"},"pay-less":{facebookHashtag:"payless",twitterMessage:"Too good not to share… Thanks! #payless",emailText:"Hey, I thought you might like this Pay Less Super Markets coupon! Check it out"},qfc:{facebookHashtag:"qfc",twitterMessage:"Too good not to share… Thanks @QFCGrocery!",emailText:"Hey, I thought you might like this QFC coupon! Check it out"},ralphs:{facebookHashtag:"ralphs",twitterMessage:"Too good not to share… Thanks @RalphsGrocery!",emailText:"Hey, I thought you might like this Ralphs coupon! Check it out"},smithsfoodanddrug:{facebookHashtag:"smithsfoodanddrug",twitterMessage:"Too good not to share… Thanks @MySmithsGrocery!",emailText:"Hey, I thought you might like this Smith’s Food and Drug coupon! Check it out"},metromarket:{facebookHashtag:"metromarket",twitterMessage:"Too good not to share… Thanks @mymetromarket!",emailText:"Hey, I thought you might like this Metro Market coupon! Check it out"},marianos:{facebookHashtag:"marianos",twitterMessage:"Too good not to share… Thanks @MarianosMarket!",emailText:"Hey, I thought you might like this Mariano’s coupon! Check it out"},picknsave:{facebookHashtag:"picknsave",twitterMessage:"Too good not to share… Thanks @picknsavestores!",emailText:"Hey, I thought you might like this Pick ‘n Save coupon! Check it out"},copps:{facebookHashtag:"copps",twitterMessage:"Too good not to share… Thanks! #copps",emailText:"Hey, I thought you might like this Copps coupon! Check it out"}};var Y=e=>{var o=.5*window.outerHeight,t=.5*window.outerWidth,a=.25*window.outerHeight,n=.25*window.outerWidth;window.open(e,"shareWindow","height="+o+", width="+t+", top="+a+", left="+n+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")},j=e=>e?e.map(((e,o)=>"custom_icon"===e.type.toLowerCase()?((e,o)=>{var t=e.src,a=(0,F.Lb)(e.url,e.queryParams);return N.createElement(G.A,{key:o,className:"mr-12 h-24 SocialShare-"+e.kind+"Icon",href:a,target:"_blank","aria-label":e.kind,onClick:o=>{o.preventDefault(),e.onClick(),Y(a)},"data-testid":"SocialShare-"+e.kind+"Icon"},N.createElement(t,{width:24,height:24,label:""}))})(e,o):"icon"===e.type.toLowerCase()?((e,o)=>{var t=(0,F.Lb)(e.url,e.queryParams);return N.createElement(G.A,{key:o,className:"SocialShare-"+e.kind+"Link",href:t,target:"_blank","aria-label":e.kind,onClick:o=>{o.preventDefault(),e.onClick(),Y(t)}},N.createElement(K.e,{"aria-hidden":"true",className:"h-24 SocialShare-icons w-24 ml-0 text-accent-more-prominent"}))})(e,o):((e,o)=>N.createElement("button",{type:"button",key:o,className:"kds-Link text-accent-more-prominent bg-primary bg-opacity-transparent h-24 w-full flex justify-center mb-4 sm:mb-0 sm:mr-12 sm:w-auto kds-Text--bold SocialShare-buttons flex flex-row items-center "+(e.className?e.className:"")+" no-underline","aria-label":e.text,onClick:()=>e.onClick()},N.createElement(g.u,{"aria-hidden":"true",size:"m",className:"mr-0 text-accent-more-prominent"}),N.createElement(y.A,{size:"m"},e.text)))(e,o))):null;class W extends N.Component{constructor(e){super(e),this.copyUrlToClipboard=e=>{var o=(0,P.lW)(e,this.props.url);this.props.copyAction&&this.props.copyAction(o),this.fireOmnitureEvent("copy")},this.getEmailLink=e=>"mailto:?subject=Found a coupon for you!&body="+(V[e].emailText+"."+escape("\r\n\r\n")+this.props.description+"."+escape("\r\n\r\n")+"Learn more: "+this.props.url),this.fireOmnitureEvent=e=>{this.props.socialShareOmnitureHandler(e)}}render(){var e,{description:o,imageURL:t,url:a,bannerName:n}=this.props,s=V[n],r=[{type:"copy-link",kind:"secondary",onClick:e=>{this.copyUrlToClipboard(e)},text:"Copy Link",className:"KrogerSocialShare-drawer-copyLink"},{type:"custom_icon",kind:"facebook",color:"blue2",url:"https://www.facebook.com/sharer/sharer.php",queryParams:{u:a,hashtag:"#"+s.facebookHashtag},src:M.G,alt:"facebook",ariaLabel:"Share via Facebook",onClick:()=>this.fireOmnitureEvent("facebook")},{type:"custom_icon",kind:"twitter",url:"https://www.twitter.com/intent/tweet",queryParams:{text:s.twitterMessage,url:a,hashtags:"Savings"},src:H.f,alt:"twitter",ariaLabel:"Share via Twitter",onClick:()=>this.fireOmnitureEvent("twitter")},{type:"custom_icon",kind:"pinterest",url:"https://www.pinterest.com/pin/create/button/",queryParams:{description:o,media:t,url:a},src:B.y,alt:"pinterest",ariaLabel:"Share via Pinterest",onClick:()=>this.fireOmnitureEvent("pinterest")},{type:"icon",kind:"email",url:this.getEmailLink(n),alt:"IconEmail",ariaLabel:"Share via Email",onClick:()=>this.fireOmnitureEvent("email")}];return e=r,[N.createElement("div",{"data-testid":"social-share-drawer",key:0,className:"SocialShare-drawer--before self-center w-12 "}),N.createElement("div",{key:1,className:"SocialShare-drawer bg-neutral-more-subtle w-full px-12 pt-12 pb-16 sm:p-16 no-underline rounded-medium mb-4 sm:mb-0"},N.createElement("div",{className:"flex flex-row items-center justify-center flex-wrap SocialShare-drawer-buttonContainer"},j(e)))]}}const Q=W;var{q5:z,q2:q}=v,X=e=>{var{specialSavings:o}=e;return o&&o.length>0?o[0]:null};const J=e=>{var{bannerName:o,coupon:t,couponIndex:a=0,disabled:n,isModal:s,navigateSocialShareOmniture:r,omniture:i,postRemoveAction:l,ppr:u=1,setShouldDisplayFlexMessage:d,shouldDisplayFlexOfferMessage:v,shouldOpenDetailsModalInContainer:g,socialShareOmnitureHandler:y,titlesForHidingExpiryTag:h}=e,[I,f]=(0,N.useState)(!1),[k,w]=(0,N.useState)(!1),[M,H]=(0,N.useState)(!1),[B,F]=(0,N.useState)(!1),{couponStatus:G,couponActionHandler:K,omnitureHandler:V}=(0,R.aO)({coupon:t,disabled:n,omniture:i,postRemoveAction:l,couponContext:"coupon details",setShouldDisplayFlexMessage:d}),Y=G===q,j=Y?z:void 0,W=e=>{f(!0),F(e),setTimeout((()=>{f(!1),F(!1)}),4e3)},J=X(t),{imageUrl:Z}=t;return N.createElement("section",{"data-testid":"CouponDetails-new-content",className:"CouponDetails-new-content flex flex-col h-auto block pb-16 "+(s?"pt-24":"pt-16")},N.createElement("div",{className:C()("flex flex-col px-24",{"sm:flex-row sm:px-32":!g})},N.createElement("div",{className:"CouponDetails-new-image flex flex-col justify-start"},J&&N.createElement(x,{coupon:t}),N.createElement("div",{className:"h-auto"},N.createElement(D,{enable:"NON_RETAILER_ONLY"===t.cashbackCashoutType,className:"mr-auto"})),N.createElement("div",{"data-testid":"CouponDetails-Image",className:C()("CouponDetails-Image self-center justify-center content-center",{"sm:self-start sm:mt-16 mt-8 sm:mb-0 mb-16":!g,"CouponDetails-Modal-Image":s,"mb-40":g})},N.createElement(O.A,{src:Z,alt:"",height:s?"204px":"253px",width:s?"204px":"253px"}))),(()=>{var e=X(t),{longDescription:l,requirementDescription:d,shortDescription:O}=t,f=(e=>"/savings/c/"+e.krogerCouponNumber)(t),D=window.location.origin+f;return N.createElement("div",{className:C()("ml-0 flex flex-col",{"sm:ml-48":!s&&!g,"sm:ml-80 ml-0":s}),disabled:n},N.createElement("div",{className:C()("hidden",{"sm:inline":!g})},N.createElement(E.A,{size:"m",tag:"h2",className:"mb-16 max-w-full font-bold CouponDetails-shortDescription","data-testid":"CouponDetails-shortDescription",tabIndex:0},O)),N.createElement("div",{className:C()({"sm:hidden":!g})},N.createElement(E.A,{size:"m",tag:"h2",className:"mb-16 max-w-full font-bold","data-testid":"CouponDetails-shortDescription",tabIndex:0},O)),N.createElement("div",{className:"CouponDetails-description-new block mb-16"},((e,o,t,a,n)=>e?N.createElement("div",null,o,N.createElement("div",{className:"mt-16"},c()(t)),N.createElement("div",{className:"mt-16"},a&&!p()(a.description)&&a.description),N.createElement("div",{className:"mt-16"},"Limit of one coupon per household. Digital Coupons and paper coupons may not be combined on the purchase of a single item. Specially marked items, such as Clearance or Manager’s Specials may not be eligible for Digital Coupons."," ",N.createElement("button",{type:"button",className:"kds-Link no-underline text-accent-more-prominent bg-primary bg-opacity-transparent",onClick:()=>n(!1),tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&n(!1)}},"Less Details"))):N.createElement("span",null,o.substring(0,160)+"...",N.createElement("button",{type:"button",className:"kds-Link no-underline text-accent-more-prominent bg-primary bg-opacity-transparent",onClick:()=>n(!0),tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&n(!0)}},"More Details")))(k,d,l,e,w)),N.createElement(U.A,{coupon:t,titlesForHidingExpiryTag:h}),N.createElement("div",{className:"CouponDetails-buttonMessage flex items-center mt-12"},((e,o,t,a,n)=>{var s=N.createElement(m.A,{kind:"subtle",palette:"positive",variant:"fill",icon:N.createElement(A.l,{"aria-hidden":"true"}),role:"dialog",className:"message-height mb-8 max-w-full",tabIndex:0},"Link copied to clipboard"),r=N.createElement(m.A,{kind:"subtle",palette:"negative",variant:"fill",icon:N.createElement(S.c,{"aria-hidden":"true"}),role:"alert",className:"message-height mb-8 max-w-full",tabIndex:0},"Unable to copy to clipboard");return e?o?s:r:N.createElement(b.A,{coupon:t,couponStatus:a,classNames:"mb-8",shouldDisplayFlexOfferMessage:n})})(I,B,t,G,v)),N.createElement("div",{className:"w-full flex flex-col sm:flex-row-reverse","data-testid":"CouponDetails-CouponActions"},N.createElement("div",{className:"flex-1 "+("CASH_BACK"===t.type||t.forCampaign?"w-full":""),"data-testid":"CouponDetails-CouponStatus"},N.createElement(L.A,{coupon:t,couponActionHandler:K,couponIndex:a,couponStatus:G,omnitureHandler:V,ppr:u,couponStatusOverride:j,className:"w-full"})),"CASH_BACK"!==t.type&&!t.forCampaign&&((e,o,t,a,n)=>o?null:e.isSharable?N.createElement("div",{className:"sm:mx-16 self-center sm:mt-0 mt-12","data-testid":"CouponDetails-social-share"},N.createElement(T,{shareButtonTitle:"Share Coupon",onClickHandler:n})):N.createElement("div",{className:"sm:mx-24 self-center sm:mt-0 mt-12","data-testid":"CouponDetails-share"},N.createElement(_,{coupon:e,detailUrl:t,onShare:a})))(t,Y,f,(e=>{var o=(0,P.lW)(e,D);W(o)}),(e=>{r(i.componentName)(),e.preventDefault(),H(!M)}))),M?N.createElement(Q,{copyAction:W,description:t.shortDescription+" "+t.requirementDescription,imageURL:t.imageUrl,url:D,socialShareOmnitureHandler:y(i.componentName,t),bannerName:o}):"")})()))};var Z={closeModal:s.Oo,socialShareOmnitureHandler:r.C$,navigateSocialShareOmniture:r.PC};const $=(0,i.connect)(((e,o)=>{var{selectedCouponsFilters:t,head:s}=e;return{omniture:(0,a.A)({componentName:o.componentName,clickListOffers:t.showClickListOffers,productSearchID:o.productSearchID},o.metrics),bannerName:s.bannerName,titlesForHidingExpiryTag:(0,n.t6)(e)}}),Z)(J)},589636:(e,o,t)=>{t.d(o,{A:()=>r});var a=t(58168),n=t(296540),s=t(851221),r=e=>o=>{var{coupon:t,couponContext:r,disabled:i=!1,omniture:l,postRemoveAction:c}=o,{couponStatus:u,couponActionHandler:p,omnitureHandler:d}=(0,s.aO)({coupon:t,couponContext:r,disabled:i,omniture:l,postRemoveAction:c}),C=(0,a.A)({},o,{couponStatus:u,couponActionHandler:p,omnitureHandler:d});return n.createElement(e,C)}},550679:(e,o,t)=>{t.d(o,{c:()=>s});var a=t(416683),n=t(95531),s=(0,a.connect)((e=>{var o=n.modalityPreferences.selectors.getActiveModalityType(e);return{enableShip:!o||"SHIP"===o}}))},168618:(e,o,t)=>{t.d(o,{a:()=>c});var a=t(255263),n=t(416683),s=t(801081),r=t(800064),i=(0,s.createSelector)(r.useCases.modalityPreferences.selectors.async,r.useCases.modalityPreferences.selectors.getActiveLAFObject,r.useCases.modalityPreferences.selectors.getActiveModalityType,(function(e,o,t){void 0===e&&(e={loaded:!1,error:!1,loading:!1});var a,{loaded:n,error:s,loading:r}=e,i={};return n&&o&&(i=o,a=t),{preferredStoreLoaded:n,preferredStoreLoading:r,preferredStoreErrored:s,activeLAFObject:i,activeModalityType:a}})),l=t(550679),c=(0,a.compose)(l.c,(0,n.connect)((e=>i(e))))},851221:(e,o,t)=>{t.d(o,{aO:()=>I});var a=t(58168),n=t(616962),s=t(315249),r=t(432521),i=t(203819),l=t(108118),c=t(773409),u=(e,o,t)=>n=>{var u;if(e){var p={teamName:s.g.Savings,eventObjects:{components:[(0,a.A)({name:(0,i.formatComponentName)(e).toLowerCase()},t&&{type:t})],flows:[{status:l.nW.Started,name:"enroll in boost",step:{name:"start"}}],uiElements:[{event:l.Jh.Clicked}]}};(0,c.j)(p)}n((0,r.o)("/membership"+(null!==(u=null==o?void 0:o.query)&&void 0!==u?u:"")))};var p=t(690307),d=t(706037),C=t(369465),m=t(401533),A=t(832875),S=e=>(e=>e.couponsFilters)(e).searchString,E=t(183043),O=t(652006),v=t(236157),N=t(416683),g=t(375413),y=t(31739),_=t(401442),h=t(867461),T=()=>{},P=function(e){return e[e.IsNotAuthenticated=0]="IsNotAuthenticated",e[e.IsAuthenticatedButBoostMemberExclusive=1]="IsAuthenticatedButBoostMemberExclusive",e[e.IsAuthenticatedButNotLoyalMember=2]="IsAuthenticatedButNotLoyalMember",e[e.CouponCanBeClip=3]="CouponCanBeClip",e[e.CouponCanBeUnclip=4]="CouponCanBeUnclip",e[e.CouponIsBeingClip=5]="CouponIsBeingClip",e[e.CouponIsBeingUnclip=6]="CouponIsBeingUnclip",e[e.MaxOffersClippedLimitReached=7]="MaxOffersClippedLimitReached",e[e.CouponIsExpired=8]="CouponIsExpired",e[e.CouponIsDisabled=9]="CouponIsDisabled",e}(P||{}),L=e=>{var{coupon:o,isAuthenticated:t,hasMaxCouponLimitReached:a,omniture:r,hasActiveEnrollment:i,loyalMember:c,postRemoveAction:A,disabled:S,enableCouponExpiryValidation:E,loadToCardOmniture:v,couponContext:N,setShouldDisplayFlexMessage:g}=e,y=(e=>{var{coupon:o,isAuthenticated:t,hasMaxCouponLimitReached:a,hasActiveEnrollment:n,loyalMember:s,disabled:r}=e;return t?((e,o,t)=>{var a;return e&&!o&&!(null==t||null===(a=t.specialSavings)||void 0===a||!a.find((e=>"BME"===e.name)))})(t,n,o)?P.IsAuthenticatedButBoostMemberExclusive:((e,o)=>e&&!o)(t,s)?P.IsAuthenticatedButNotLoyalMember:a&&!o.addedToCard?P.MaxOffersClippedLimitReached:o.couponExpired?P.CouponIsExpired:((e,o)=>!e.addedToCard&&o)(o,r)?P.CouponIsDisabled:(e=>!e.addedToCard&&!e.couponLoading)(o)?P.CouponCanBeClip:(e=>e.addedToCard&&!e.couponRemoving)(o)?P.CouponCanBeUnclip:(e=>!e.addedToCard&&e.couponLoading)(o)?P.CouponIsBeingClip:(e=>e.addedToCard&&e.couponRemoving)(o)?P.CouponIsBeingUnclip:P.CouponIsDisabled:P.IsNotAuthenticated})({coupon:o,isAuthenticated:t,hasMaxCouponLimitReached:a,hasActiveEnrollment:i,loyalMember:c,disabled:S});switch(y){case P.IsNotAuthenticated:return{status:n.iv,handler:e=>()=>e((0,O.y)(null==r?void 0:r.componentName,{},null==r?void 0:r.componentType)),omnitureHandler:()=>T};case P.IsAuthenticatedButBoostMemberExclusive:return{status:n.q2,handler:e=>()=>e(u(null==r?void 0:r.componentName,{},null==r?void 0:r.componentType)),omnitureHandler:()=>T};case P.IsAuthenticatedButNotLoyalMember:return{status:n.w6,handler:e=>()=>e((0,p.HH)()),omnitureHandler:d.lJ};case P.MaxOffersClippedLimitReached:return{status:n.rJ,handler:e=>o=>e((0,p.sx)(o)),omnitureHandler:()=>T};case P.CouponIsExpired:return{status:n.fZ,handler:()=>T,omnitureHandler:()=>T};case P.CouponCanBeClip:return{status:n.YW,handler:e=>t=>{if(E&&o.expirationDate&&new Date>=new Date(o.expirationDate)){var a=C.q5;return n=(null==v?void 0:v.componentName)||"withCouponStatusContainer",r=a[o.type],(0,_.A)({eventObjects:{applicationErrors:[{category:"coupon",httpResponse:{absolutePath:"no relevant value",statusCode:-1},message:r,type:l.TD.UserConstraint}],components:[{name:n}]},teamName:s.g.Savings}),void e((0,p.cU)()(t))}var n,r;e((0,p.do)(m.vj,v,void 0,void 0,g)(t)),"function"==typeof t.additionalActions&&e(t.additionalActions({coupon:o,couponContext:N}))},omnitureHandler:d.wd};case P.CouponIsBeingClip:return{status:n.wh,handler:()=>T,omnitureHandler:()=>T};case P.CouponCanBeUnclip:return{status:n.d,handler:e=>o=>{e((0,p.Pu)(m.rB,r,A,void 0,void 0,g)(o))},omnitureHandler:d.px};case P.CouponIsBeingUnclip:return{status:n.K9,handler:()=>T,omnitureHandler:()=>T}}return{status:n.e0,handler:()=>T,omnitureHandler:()=>T}},I=e=>{var o,{coupon:t,couponContext:n,disabled:s,omniture:r,postRemoveAction:i,setShouldDisplayFlexMessage:l}=e,c=(0,N.useDispatch)(),u=(0,N.useSelector)(v.Hp),p=(0,N.useSelector)(v.Kc),d=(0,N.useSelector)(h.S3),C=!0===(0,N.useSelector)(A.EI),m=(0,N.useSelector)(S),O=(0,N.useSelector)(g.selectors.banner.getBannerNameFromState),_=!!(0,N.useSelector)((e=>(0,y.w)(e,O)));if(r){var T=m&&n===E.wn.ALL_COUPONS?"coupons search filter":r.componentName;o=(0,a.A)({},r,{componentName:T,searchString:m})}var P=L({coupon:t,isAuthenticated:p,hasMaxCouponLimitReached:d,omniture:r,hasActiveEnrollment:_,loyalMember:u,postRemoveAction:i,disabled:s,enableCouponExpiryValidation:C,loadToCardOmniture:o,couponContext:n,setShouldDisplayFlexMessage:l});return{couponStatus:P.status,couponActionHandler:P.handler(c),omnitureHandler:c(P.omnitureHandler(r))}}},596991:(e,o,t)=>{t.d(o,{By:()=>a,lW:()=>s,tv:()=>n});var a=e=>e(window),n=e=>{a((o=>{e?o.document.getElementsByTagName("html")[0].classList.remove("disableScroll"):o.document.getElementsByTagName("html")[0].classList.add("disableScroll")}))},s=(e,o)=>{e.preventDefault();var t=!1;return a((e=>{var a=document.createElement("span");a.innerHTML=o,a.setAttribute("style","position: fixed; left: -1000px; top: -1000px"),document.body.appendChild(a);var n=document.createRange(),s=e.getSelection();a.style.msUserSelect="text",a.style.MozUserSelect="text",a.style.webkitUserSelect="text",a.style.userSelect="text",n.selectNode(a),s.removeAllRanges(),s.addRange(n);try{t=document.execCommand("copy",!1),document.body.removeChild(a)}catch(e){t=!1}})),t}},867461:(e,o,t)=>{t.d(o,{S3:()=>a});var a=e=>{var o,t;return null===(o=e.coupons)||void 0===o||null===(t=o.status)||void 0===t?void 0:t.maxClippedCouponsLimitReached}}}]);
//# sourceMappingURL=coupons.efc59ad14e257f18fa49.js.map